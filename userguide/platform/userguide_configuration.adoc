= Kill Bill and Kaui Configuration Guide

The purpose of the guide is to provide an overview of how Kill Bill configuration works and how different properties can be configured.

== Overview

At a high level, Kill Bill configuration can be done in one of the following ways:

* *Per-tenant configuration* - Used to define tenant-specific configuration properties (such as Catalog or Overdue XML configuration files, or Invoice and Payment properties).
* *Properties file* - Used to define properties global to the system. 
* *Java System Properties* - Can be used in rare cases to define configuration properties. 
* *Third Party Configuration Files* -  (e.g. EhCache configuration file, location specified via the Java System Property `org.killbill.cache.config.location`).
* *Environment variables* - Configuration properties can also be specified via environment variables. 

Before learning about each of these approaches, it is necessary to understand how Kill Bill uses config classes to defines properties. 

=== Kill Bill Config Classes

KillBill defines *configuration-related Java classes* that specify configuration information for the various sub-modules. For example some of these classes are present in the https://github.com/killbill/killbill/tree/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition[org.killbill.billing.util.config.definition] package. 

Each class defines some configuration properties. So, for example, the https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/PaymentConfig.java[PaymentConfig.java] defines configuration properties required by the payment sub module. 

Each property includes the following annotations:

* `@Config`: Specifies the configuration key to use
* `@Default`: Specifies the default value for this property
* `Description`: Specifies the property description

For example, consider the following section in the https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/PaymentConfig.java[PaymentConfig.java]:
[source,java]
----
@Config("org.killbill.payment.retry.days")
@Default("8,8,8")
@Description("Specify the number of payment retries along with the interval in days between payment retries when payment failures occur")
List<Integer> getPaymentFailureRetryDays();
----

This defines the `org.killbill.payment.retry.days` property (which corresponds to the payment retry schedule) with a default value of `8,8,8`. In order to specify a different payment retry schedule, you need to specify the following property:

[source,bash]
----
org.killbill.payment.retry.days=5,10
----

The following table lists all the config classes:

[options="header",cols="1,1"]
|===
|Class Name   |Description
//-------------
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/BroadcastConfig.java[BroadcastConfig]   |Includes broadcast service related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/CacheConfig.java[CacheConfig]   |Includes cache related configuration properties    
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/CatalogConfig.java[CatalogConfig]   |Includes catalog related configuration properties
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/CurrencyConfig.java[CurrencyConfig]   |Includes currency related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/EhCacheConfig.java[EhCacheConfig]   |Includes EH Cache related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/EventConfig.java[EventConfig]  |Includes event related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/InvoiceConfig.java[InvoiceConfig]   |Includes invoice related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/JaxrsConfig.java[JaxrsConfig.java]   |Includes Jaxrs related configuration properties      
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/MultiTenantEventConfig.java[MultiTenantEventConfig] |   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/NotificationConfig.java[NotificationConfig]|Includes push notifications related configuration properties
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/PaymentConfig.java[PaymentConfig]|Includes payment related configuration properties
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/RbacConfig.java[RbacConfig]|
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/RedisCacheConfig.java[RedisCacheConfig]|Includes Redis Cache related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/SecurityConfig.java[SecurityConfig]|Includes Shiro related configuration properties   
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/SubscriptionConfig.java[SubscriptionConfig]|Includes subscription related configuration properties
|https://github.com/killbill/killbill/blob/2b80b0445c7baf1f613425bb236a8cb36f1f377a/util/src/main/java/org/killbill/billing/util/config/definition/TenantConfig.java[TenantConfig]|Includes tenant related configuration properties
|https://github.com/killbill/killbill-commons/blob/4b8d8e647b8028076b5e74cdc27170bda50ca029/jdbi/src/main/java/org/killbill/commons/jdbi/guice/DaoConfig.java[DaoConfig]|Specifies database related configuration properties for Kill Bill core
|https://github.com/killbill/killbill-platform/blob/780991187b7c90556340fcf00e9e1168a3db6d42/osgi/src/main/java/org/killbill/billing/osgi/glue/OSGIDataSourceConfig.java[OSGIDataSourceConfig] |Specifies database related configuration properties for Kill Bill plugins
|https://github.com/killbill/killbill-commons/blob/4b8d8e647b8028076b5e74cdc27170bda50ca029/queue/src/main/java/org/killbill/bus/api/PersistentBusConfig.java[PersistentBusConfig]|Specifies configuration properties related to the persistent bus. Note that all the properties use a substitution parameter called `instanceName`. This is because the properties defined here are built to be used across multiple instances. Kill Bill typically uses two persistent buses: `main` and `external`. Thus, `instanceName` needs to be replaced with these bus names while specifying the parameters.  
|https://github.com/killbill/killbill-commons/blob/4b8d8e647b8028076b5e74cdc27170bda50ca029/queue/src/main/java/org/killbill/notificationq/api/NotificationQueueConfig.java[NotificationQueueConfig]|Specifies configuration properties related to the notification queue. Note that all the properties use a substitution parameter called `instanceName`. This is because the properties defined here are built to be used across multiple instances. Kill Bill typically uses one notification queue named `main`. Thus, `instanceName` needs to be replaced with this queue name while specifying the parameters. 
|https://github.com/killbill/killbill-platform/blob/780991187b7c90556340fcf00e9e1168a3db6d42/server/src/main/java/org/killbill/billing/server/config/KillbillServerConfig.java[KillbillPlatformConfig]|Includes Kill Bill web application related configuration properties 
|https://github.com/killbill/killbill-platform/blob/780991187b7c90556340fcf00e9e1168a3db6d42/server/src/main/java/org/killbill/billing/server/config/MetricsGraphiteConfig.java[MetricsGraphiteConfig]| Includes Metrics and Graphite related configuration properties
|https://github.com/killbill/killbill-platform/blob/780991187b7c90556340fcf00e9e1168a3db6d42/osgi/src/main/java/org/killbill/billing/osgi/config/OSGIConfig.java[OSGIConfig]|Includes OSGI related configuration properties
|===

=== Per Tenant Properties

Per tenant properties refers to properties that can be specified at a tenant level. Thus, each tenant can have different values for these properties.

Such properties are stored in the Kill Bill database and can be set by invoking the https://killbill.github.io/slate/#tenant-add-a-per-tenant-system-properties-configuration[uploadPerTenantConfig] endpoint.

For instance to set the invoice dry run notification schedule for the  `boblazar` tenant, you can invoke the endpoint as follows:

[source]
----
curl -v \
     -X POST \
     -u 'admin:password' \
     -H "X-Killbill-ApiKey: bob" \
     -H "X-Killbill-ApiSecret: lazar" \
     -H "Content-Type: text/plain" \
     -H "X-Killbill-CreatedBy: configurator" \
     -d '{"org.killbill.invoice.dryRunNotificationSchedule":"48h"}' \
     "http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"
----

This sets `org.killbill.invoice.dryRunNotificationSchedule=48h` for the `boblazar` tenant.

*Important Notes:*

* Each call overwrites previous properties, so it is necessary to specify the full list of properties for a given tenant. 
* These properties can also be specified in the killbill properties file in which case they become global properties applicable to all tenants. * If a property is specified in properties file as well as at a per-tenant level, the per-tenant configuration takes precedence.

The following table lists some of the important per-tenant properties:

[options="header",cols="1,1,1"]
|===
|Property Name   |Description|Default Value
//----------------------
|org.killbill.payment.retry.days   |Specifies the number of payment retries along with the interval in days between payment retries when payment failures occur   |8,8,8   
|org.killbill.payment.failure.retry.start.sec   |Specifies the interval of time in seconds before retrying a payment that failed due to a plugin failure    |300   
|org.killbill.payment.failure.retry.max.attempts   |Specifies the max number of attempts before retrying a payment that failed due to a plugin failure    |8
|org.killbill.invoice.maxNumberOfMonthsInFuture|Maximum target date to consider when generating an invoice| 36
|org.killbill.invoice.maxDailyNumberOfItemsSafetyBound|Maximum daily number of invoice items to generate for a subscription id|15
|org.killbill.invoice.dryRunNotificationSchedule|DryRun invoice notification time before targetDate (ignored if set to 0s)|0s
|org.killbill.billing.server.notifications.retries|Delay before which unresolved push notifications should be retried|15m,30m,2h,12h,1d
|===

For a complete list of all the per-tenant properties, you can check the config classes specified above. Note that the per-tenant properties have `InternalTenantContext` in the signature of the method.

=== Properties File

Using an explicit `.properties` file is the most common and frequently used way of defining configuration properties. Properties defined within this file are global and are applicable across all tenants. Typically, a default `killbill.properties` exists as explained in the <<Setup Specific Notes>> section. You can add new properties/modify property values in this file as required. 

The following table lists some of the important global properties:


[options="header",cols="1,1,1,1"]
|===
|Category   |Property Name|Description|Default Value
//-------------------------------
|Database   |org.killbill.dao.url   |The jdbc url for the Kill Bill database   |jdbc:h2:file:/var/tmp/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE   
|Database   |org.killbill.dao.user   |The jdbc user name for the Kill Bill database   |killbill   
|Database   |org.killbill.dao.password   |The jdbc password for the Kill Bill database   |killbill   
|Plugin Database   |org.killbill.billing.osgi.dao.url   |The jdbc url for the plugin database   |jdbc:h2:file:/var/tmp/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE   
|Plugin Database    |org.killbill.billing.osgi.dao.user   |The jdbc user name for the plugin database   |killbill   
|Plugin Database    |org.killbill.billing.osgi.dao.password   |The jdbc password for the plugin database   |killbill   
|Catalog |  org.killbill.catalog.uri   |Default Catalog location in case a per-tenant catalog is not specified   |SpyCarAdvanced.xml   
|Overdue   |org.killbill.overdue.uri   |Default overdue configuration location in case a per-tenant configuration is not specified    |NoOverdueConfig.xml  
|Notification Queue   |org.killbill.notificationq.<instancename>.sleep + 

(Replace `<instancename>` with the notification queue instance name (typically, `main` as specified above)   |Time in milliseconds to sleep between runs. |3000   
|Notification Queue   |org.killbill.notificationq.<instancename>.queue.mode + 

(Replace `<instancename>` with the notification queue instance name (typically, `main` as specified above)   |How entries are put in the queue. Possible values are  `STICKY_EVENTS`, `STICKY_POLLING` ,`POLLING` as specified in https://github.com/killbill/killbill-commons/blob/4b8d8e647b8028076b5e74cdc27170bda50ca029/queue/src/main/java/org/killbill/queue/api/PersistentQueueConfig.java[PersistentQueueMode] |STICKY_POLLING   
|Notification Queue   |org.killbill.notificationq.${instanceName}.notification.nbThreads + 

(Replace `<instancename>` with the notification queue instance name (typically, `main` as specified above)  |Number of threads to use   |10   
|Notification Queue   |org.killbill.notificationq.${instanceName}.claimed + 

(Replace `<instancename>` with the notification queue instance name (typically, `main` as specified above)  |Number of notifications to fetch at once   |10   
|Persistent Bus   |org.killbill.persistent.bus.${instanceName}.sleep + 

(Replace `<instancename>` with the persistent bus instance name (typically, `main` or `external` as specified above)  |Time in milliseconds to sleep between runs (only valid in STICKY_POLLING, POLLING).   |3000   
|Persistent Bus   |org.killbill.persistent.bus.${instanceName}.queue.mode + 

(Replace `<instancename>` with the persistent bus instance name (typically, `main` or `external` as specified above)  |How entries are put in the queue. Possible values are  `STICKY_EVENTS`, `STICKY_POLLING` ,`POLLING` as specified in https://github.com/killbill/killbill-commons/blob/4b8d8e647b8028076b5e74cdc27170bda50ca029/queue/src/main/java/org/killbill/queue/api/PersistentQueueConfig.java[PersistentQueueMode]    |STICKY_EVENTS   
|Persistent Bus   |org.killbill.persistent.bus.${instanceName}.nbThreads  + 

(Replace `<instancename>` with the persistent bus instance name (typically, `main` or `external` as specified above)  |Max number of dispatch threads to use |30   
|Persistent Bus   |org.killbill.persistent.bus.${instanceName}.claimed + 

(Replace `<instancename>` with the persistent bus instance name (typically, `main` or `external` as specified above)   |Number of bus events to fetch from the database at once (only valid in 'polling mode')   |10   
|Persistent Bus   |org.killbill.persistent.bus.${instanceName}.queue.capacity + 

(Replace `<instancename>` with the persistent bus instance name (typically, `main` or `external` as specified above)   |Size of the inflight queue (only valid in STICKY_EVENTS mode)   |30000   
|Kill Bill Web Application   |org.killbill.server.multitenant   |Whether multi-tenancy is enabled   |true   
|Kill Bill Web Application   |org.killbill.server.test.mode   |Whether to start in test mode   |false   
|Kill Bill Web Application    |org.killbill.server.http.gzip   |Allow Kill Bill to return gzip json when Content-Encoding is set with gzip   |false   
|Payment   |org.killbill.payment.plugin.timeout   |Timeout for each payment attempt   |30s   
|===

For a complete list of all the global properties, you can check the config classes specified above.


=== Java System Properties 

It is also possible to specify the Kill Bill configuration properties as Java system properties. For example, the `org.killbill.dao.url` can be specified as a system property via `-Dorg.killbill.dao.url=<url>`.

Note that if a `killbill.properties` file is specified, the system properties are ignored and the properties specified in the properties file are used. 

In generally, specifying properties as system properties is not a recommended approach and should only be used in rare cases.

=== Environment Variables

Kill Bill also allows defining properties via environment variables. In such a case, the value specified via the environment variable overrides the value defined in the `killbill.properties` file.

In order to specify a property via an environment variable, you need to define an environment variable corresponding to the underlying property and prefixed with *KB_*. For example, you can define an environment variable corresponding to the `org.killbill.dao.url` property as follows:
[source,bash]
----
KB_org.killbill.dao.url = <jdbc URL here>
----


== Setup Specific Notes

As explained in the https://docs.killbill.io/latest/getting_started.html[Getting Started] guide,  there are several ways to install Kill Bill such as https://docs.killbill.io/latest/getting_started.html#_aws_one_click[AWS], https://docs.killbill.io/latest/getting_started.html#_docker[Docker] or https://docs.killbill.io/latest/getting_started.html#_tomcat[Tomcat]. In addition, you may also be using Kill Bill for development/debugging using a https://docs.killbill.io/latest/development.html[standalone] setup.  

This section provides some setup specific instructions such as location of the default `killbill.properties` and so forth.

=== AWS

In case of an AWS installation, the `killbill.properties` is present at the  `/var/lib/killbill/config/killbill.properties` location. 

=== Docker

In case Kill Bill is installed via Docker, the `killbill.properties` file is present at the `/var/lib/killbill/killbill.properties` path within the Docker container.  You can modify the properties defined here. 

Alternatively, you can bind mount your own file, by specifying `-v /path/to/killbill.properties:/var/lib/killbill/killbill.properties` when starting your container.

You can also specify configuration properties using individual environment variables.The following table lists all the environment variables and their default values:

[options="header",cols="1,1"]
|===
|Variable Name   |Default   
//-------------
| `KILLBILL_ANALYTICS_NOTIFICATION_NB_THREADS` | `5`
| `KILLBILL_ANALYTICS_QUEUE_CAPACITY` | `30000`
| `KILLBILL_BUNDLE_CACHE_NAME` | `osgi-cache`
| `KILLBILL_BUNDLE_INSTALL_DIR` | `/var/lib/killbill/bundles`
| `KILLBILL_BUNDLE_PROPERTY_NAME` | `killbill.properties`
| `KILLBILL_BUS_EXTERNAL_HISTORY_TABLE_NAME` | `bus_ext_events_history`
| `KILLBILL_BUS_EXTERNAL_IN_MEMORY` | `true`
| `KILLBILL_BUS_EXTERNAL_NB_THREADS` | `50`
| `KILLBILL_BUS_EXTERNAL_SLEEP` | `0`
| `KILLBILL_BUS_EXTERNAL_TABLE_NAME` | `bus_ext_events`
| `KILLBILL_BUS_EXTERNAL_USE_INFLIGHT_Q` | `true`
| `KILLBILL_BUS_MAIN_CLAIMED` | `10`
| `KILLBILL_BUS_MAIN_HISTORY_TABLE_NAME` | `bus_events_history`
| `KILLBILL_BUS_MAIN_IN_MEMORY` | `false`
| `KILLBILL_BUS_MAIN_NB_THREADS` | `50`
| `KILLBILL_BUS_MAIN_OFF` | `false`
| `KILLBILL_BUS_MAIN_SLEEP` | `0`
| `KILLBILL_BUS_MAIN_TABLE_NAME` | `bus_events`
| `KILLBILL_CACHE_CONFIG_LOCATION` | `ehcache.xml`
| `KILLBILL_CATALOG_BUNDLE_PATH` | `org/killbill/billing/util/template/translation/CatalogTranslation`
| `KILLBILL_CATALOG_URI` | `SpyCarBasic.xml`
| `KILLBILL_CURRENCY_PROVIDER_DEFAULT` | `killbill-currency-plugin`
| `KILLBILL_DAO_CACHE_PREP_STMTS` | `true`
| `KILLBILL_DAO_CONNECTION_TIMEOUT` | `100s`
| `KILLBILL_DAO_HEALTH_CHECK_CONNECTION_TIMEOUT` | `10s`
| `KILLBILL_DAO_HEALTH_CHECK_EXPECTED99TH_PERCENTILE` | `50ms`
| `KILLBILL_DAO_IDLE_CONNECTION_TEST_PERIOD` | `5m`
| `KILLBILL_DAO_IDLE_MAX_AGE` | `2m`
| `KILLBILL_DAO_LOG_LEVEL` | `DEBUG`
| `KILLBILL_DAO_MAX_ACTIVE` | `150`
| `KILLBILL_DAO_MAX_CONNECTION_AGE` | `0m`
| `KILLBILL_DAO_MIN_IDLE` | `5`
| `KILLBILL_DAO_MYSQL_SERVER_VERSION` | `4.0`
| `KILLBILL_DAO_PASSWORD` | `killkill`
| `KILLBILL_DAO_POOLING_TYPE` | `HIKARICP`
| `KILLBILL_DAO_PREP_STMT_CACHE_SIZE` | `500`
| `KILLBILL_DAO_PREP_STMT_CACHE_SQL_LIMIT` | `2048`
| `KILLBILL_DAO_URL` | `jdbc:h2:file:/var/lib/killbill/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;MVCC=true;DB_CLOSE_ON_EXIT=FALSE`
| `KILLBILL_DAO_USER` | `killbill`
| `KILLBILL_DAO_USE_SERVER_PREP_STMTS` | `true`
| `KILLBILL_DEFAULT_LOCALE` | `en_US`
| `KILLBILL_EXPORT_PACKAGES_API` | `org.killbill.billing.account.api,org.killbill.billing.analytics.api.sanity,org.killbill.billing.analytics.api.user,org.killbill.billing.beatrix.bus.api,org.killbill.billing.catalog.api,org.killbill.billing.catalog.api.rules,org.killbill.billing.invoice.plugin.api,org.killbill.billing.invoice.api,org.killbill.billing.invoice.api.formatters,org.killbill.billing.entitlement.api,org.killbill.billing,org.killbill.clock,org.killbill.billing.notification.api,org.killbill.billing.notification.plugin.api,org.killbill.billing.notification.plugin,org.killbill.billing.osgi.api,org.killbill.billing.osgi.api.config,org.killbill.billing.overdue,org.killbill.billing.payment.api,org.killbill.billing.payment.plugin.api,org.killbill.billing.control.plugin.api,org.killbill.billing.tenant.api,org.killbill.billing.usage.api,org.killbill.billing.util.api,org.killbill.billing.util.nodes,org.killbill.billing.util.audit,org.killbill.billing.util.callcontext,org.killbill.billing.util.customfield,org.killbill.billing.util.email,org.killbill.billing.util.entity,org.killbill.billing.util.tag,org.killbill.billing.util.template,org.killbill.billing.util.template.translation,org.killbill.billing.currency.plugin.api,org.killbill.billing.catalog.plugin.api,org.killbill.billing.entitlement.plugin.api,org.killbill.billing.currency.api,org.killbill.billing.security.api,org.killbill.billing.osgi.libs.killbill,org.joda.time;org.joda.time.format;version=2.9,org.slf4j;version=1.7.2,org.osgi.service.log;version=1.3,org.osgi.service.http;version=1.2.0,org.osgi.service.deploymentadmin;version=1.1.0,org.osgi.service.event;version=1.2.0`
| `KILLBILL_EXPORT_PACKAGES_EXTRA` | ``
| `KILLBILL_EXPORT_PACKAGES_JAVA` | `com.sun.xml.internal.ws,com.sun.xml.internal.ws.addressing,com.sun.xml.internal.ws.addressing.model,com.sun.xml.internal.ws.addressing.policy,com.sun.xml.internal.ws.addressing.v200408,com.sun.xml.internal.ws.api,com.sun.xml.internal.ws.api.addressing,com.sun.xml.internal.ws.api.client,com.sun.xml.internal.ws.api.config.management,com.sun.xml.internal.ws.api.config.management.policy,com.sun.xml.internal.ws.api.fastinfoset,com.sun.xml.internal.ws.api.ha,com.sun.xml.internal.ws.api.handler,com.sun.xml.internal.ws.api.message,com.sun.xml.internal.ws.api.message.stream,com.sun.xml.internal.ws.api.model,com.sun.xml.internal.ws.api.model.soap,com.sun.xml.internal.ws.api.model.wsdl,com.sun.xml.internal.ws.api.pipe,com.sun.xml.internal.ws.api.pipe.helper,com.sun.xml.internal.ws.api.policy,com.sun.xml.internal.ws.api.server,com.sun.xml.internal.ws.api.streaming,com.sun.xml.internal.ws.api.wsdl.parser,com.sun.xml.internal.ws.api.wsdl.writer,com.sun.xml.internal.ws.binding,com.sun.xml.internal.ws.client,com.sun.xml.internal.ws.client.dispatch,com.sun.xml.internal.ws.client.sei,com.sun.xml.internal.ws.config.management.policy,com.sun.xml.internal.ws.developer,com.sun.xml.internal.ws.encoding,com.sun.xml.internal.ws.encoding.fastinfoset,com.sun.xml.internal.ws.encoding.policy,com.sun.xml.internal.ws.encoding.soap,com.sun.xml.internal.ws.encoding.soap.streaming,com.sun.xml.internal.ws.encoding.xml,com.sun.xml.internal.ws.fault,com.sun.xml.internal.ws.handler,com.sun.xml.internal.ws.message,com.sun.xml.internal.ws.message.jaxb,com.sun.xml.internal.ws.message.saaj,com.sun.xml.internal.ws.message.source,com.sun.xml.internal.ws.message.stream,com.sun.xml.internal.ws.model,com.sun.xml.internal.ws.model.soap,com.sun.xml.internal.ws.model.wsdl,com.sun.xml.internal.ws.org.objectweb.asm,com.sun.xml.internal.ws.policy,com.sun.xml.internal.ws.policy.jaxws,com.sun.xml.internal.ws.policy.jaxws.spi,com.sun.xml.internal.ws.policy.privateutil,com.sun.xml.internal.ws.policy.sourcemodel,com.sun.xml.internal.ws.policy.sourcemodel.attach,com.sun.xml.internal.ws.policy.sourcemodel.wspolicy,com.sun.xml.internal.ws.policy.spi,com.sun.xml.internal.ws.policy.subject,com.sun.xml.internal.ws.protocol.soap,com.sun.xml.internal.ws.protocol.xml,com.sun.xml.internal.ws.resources,com.sun.xml.internal.ws.server,com.sun.xml.internal.ws.server.provider,com.sun.xml.internal.ws.server.sei,com.sun.xml.internal.ws.spi,com.sun.xml.internal.ws.streaming,com.sun.xml.internal.ws.transport,com.sun.xml.internal.ws.transport.http,com.sun.xml.internal.ws.transport.http.client,com.sun.xml.internal.ws.transport.http.server,com.sun.xml.internal.ws.util,com.sun.xml.internal.ws.util.exception,com.sun.xml.internal.ws.util.localization,com.sun.xml.internal.ws.util.pipe,com.sun.xml.internal.ws.util.xml,com.sun.xml.internal.ws.wsdl,com.sun.xml.internal.ws.wsdl.parser,com.sun.xml.internal.ws.wsdl.writer,com.sun.xml.internal.ws.wsdl.writer.document,com.sun.xml.internal.ws.wsdl.writer.document.http,com.sun.xml.internal.ws.wsdl.writer.document.soap,com.sun.xml.internal.ws.wsdl.writer.document.soap12,com.sun.xml.internal.ws.wsdl.writer.document.xsd,javax.annotation,javax.management,javax.naming,javax.naming.ldap,javax.net,javax.net.ssl,javax.crypto,javax.crypto.spec,javax.sql,javax.sql.rowset,javax.sql.rowset.serial,javax.transaction,javax.transaction.xa,javax.xml,javax.xml.bind,javax.xml.validation,javax.xml.namespace,javax.xml.parsers,javax.xml.validation,javax.xml.stream,javax.xml.stream.events,javax.xml.stream.util,javax.xml.transform,javax.xml.transform.dom,javax.xml.transform.sax,javax.xml.transform.stax,javax.xml.transform.stream,javax.xml.xpath,javax.jws.soap,com.sun.org,com.sun.org.apache,com.sun.org.apache.xml,com.sun.org.apache.xml.internal,com.sun.org.apache.xml.internal.utils,com.sun.org.apache.xpath,com.sun.org.apache.xpath.internal,com.sun.org.apache.xpath.internal.jaxp,com.sun.org.apache.xpath.internal.objects,org.w3c.dom,org.w3c.dom.bootstrap,org.w3c.dom.events,org.w3c.dom.ls,org.w3c.dom.css,org.w3c.dom.html,org.w3c.dom.ranges,org.w3c.dom.stylesheets,org.w3c.dom.traversal,org.w3c.dom.views,org.xml.sax,org.xml.sax.ext,org.xml.sax.helpers,sun.misc,sun.misc.unsafe,sun.security,sun.security.util,javax.servlet;version=3.1,javax.servlet.http;version=3.1`
| `KILLBILL_EXTERNAL_CLAIM_TIME` | `5m`
| `KILLBILL_EXTERNAL_INFLIGHT_CLAIMED` | `500`
| `KILLBILL_EXTERNAL_QUEUE_CAPACITY` | `1000000`
| `KILLBILL_FAILURE_RETRY_MULTIPLIER` | `2`
| `KILLBILL_INVOICE_DRY_RUN_NOTIFICATION_SCHEDULE` | `0s`
| `KILLBILL_INVOICE_ENABLED` | `true`
| `KILLBILL_INVOICE_GLOBAL_LOCK_RETRIES` | `50`
| `KILLBILL_INVOICE_MAX_DAILY_NUMBER_OF_ITEMS_SAFETY_BOUND` | `15`
| `KILLBILL_INVOICE_MAX_NUMBER_OF_MONTHS_IN_FUTURE` | `36`
| `KILLBILL_INVOICE_READ_MAX_RAW_USAGE_PREVIOUS_PERIOD` | `2`
| `KILLBILL_INVOICE_SANITY_SAFETY_BOUND_ENABLED` | `true`
| `KILLBILL_JANITOR_ATTEMPTS_DELAY` | `12h`
| `KILLBILL_JANITOR_PENDING_RETRIES` | `65m,3h,3h,5h,1d,1d,1d,1d`
| `KILLBILL_JANITOR_UNKNOWN_RETRIES` | `1h,6h,17h`
| `KILLBILL_JAXRS_LOCATION_HOST` | ``
| `KILLBILL_JAXRS_LOCATION_USE_FORWARD_HEADERS` | `true`
| `KILLBILL_JAXRS_TIMEOUT` | `30s`
| `KILLBILL_JRUBY_CONF_DIR` | `/var/lib/killbill/config`
| `KILLBILL_JRUBY_CONTEXT_SCOPE` | `THREADSAFE`
| `KILLBILL_LOCATION_FULL_URL` | `true`
| `KILLBILL_MAIN_CLAIM_TIME` | `5m`
| `KILLBILL_MAIN_NOTIFICATION_NB_THREADS` | `10`
| `KILLBILL_MAIN_NOTIFICATION_OFF` | `false`
| `KILLBILL_MAIN_QUEUE_CAPACITY` | `1000000`
| `KILLBILL_MAIN_QUEUE_CAPACITY` | `100`
| `KILLBILL_MAIN_QUEUE_MODE` | `STICKY_POLLING`
| `KILLBILL_MANUAL_PAY_TEMPLATE_NAME` | `org/killbill/billing/util/email/templates/HtmlInvoiceTemplate.mustache`
| `KILLBILL_MAX_FAILURE_RETRY` | `3`
| `KILLBILL_METRICS_GRAPHITE_HOST` | `localhost`
| `KILLBILL_METRICS_GRAPHITE_INTERVAL` | `30`
| `KILLBILL_METRICS_GRAPHITE_PORT` | `2003`
| `KILLBILL_METRICS_GRAPHITE_PREFIX` | `killbill`
| `KILLBILL_METRICS_GRAPHITE` | `false`
| `KILLBILL_METRICS_INFLUXDB_DATABASE` | `30`
| `KILLBILL_METRICS_INFLUXDB_HOST` | `localhost`
| `KILLBILL_METRICS_INFLUXDB_INTERVAL` | `30`
| `KILLBILL_METRICS_INFLUXDB_PORT` | `2003`
| `KILLBILL_METRICS_INFLUXDB_PREFIX` | `killbill`
| `KILLBILL_METRICS_INFLUXDB_SENDER_TYPE` | `killbill`
| `KILLBILL_METRICS_INFLUXDB_SOCKET_TIMEOUT` | `30`
| `KILLBILL_METRICS_INFLUXDB` | `false`
| `KILLBILL_NOTIFICATIONQ_ANALYTICS_CLAIMED` | `100`
| `KILLBILL_NOTIFICATIONQ_ANALYTICS_HISTORY_TABLE_NAME` | `analytics_notifications_history`
| `KILLBILL_NOTIFICATIONQ_ANALYTICS_IN_MEMORY` | `false`
| `KILLBILL_NOTIFICATIONQ_ANALYTICS_SLEEP` | `3000`
| `KILLBILL_NOTIFICATIONQ_ANALYTICS_TABLE_NAME` | `analytics_notifications`
| `KILLBILL_NOTIFICATIONQ_MAIN_CLAIMED` | `100`
| `KILLBILL_NOTIFICATIONQ_MAIN_HISTORY_TABLE_NAME` | `notifications_history`
| `KILLBILL_NOTIFICATIONQ_MAIN_IN_MEMORY` | `false`
| `KILLBILL_NOTIFICATIONQ_MAIN_SLEEP` | `70000`
| `KILLBILL_NOTIFICATIONQ_MAIN_TABLE_NAME` | `notifications`
| `KILLBILL_OSGI_DAO_CACHE_PREP_STMTS` | `true`
| `KILLBILL_OSGI_DAO_CONNECTION_TIMEOUT` | `100s`
| `KILLBILL_OSGI_DAO_IDLE_CONNECTION_TEST_PERIOD` | `5m`
| `KILLBILL_OSGI_DAO_IDLE_MAX_AGE` | `2m`
| `KILLBILL_OSGI_DAO_LOG_LEVEL` | `DEBUG`
| `KILLBILL_OSGI_DAO_MAX_ACTIVE` | `150`
| `KILLBILL_OSGI_DAO_MAX_CONNECTION_AGE` | `0m`
| `KILLBILL_OSGI_DAO_MIN_IDLE` | `5`
| `KILLBILL_OSGI_DAO_MYSQL_SERVER_VERSION` | `4.0`
| `KILLBILL_OSGI_DAO_PASSWORD` | `killbill`
| `KILLBILL_OSGI_DAO_POOLING_TYPE` | `HIKARICP`
| `KILLBILL_OSGI_DAO_PREP_STMT_CACHE_SIZE` | `500`
| `KILLBILL_OSGI_DAO_PREP_STMT_CACHE_SQL_LIMIT` | `2048`
| `KILLBILL_OSGI_DAO_URL` | `jdbc:h2:file:/var/lib/killbill/killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;MVCC=true;DB_CLOSE_ON_EXIT=FALSE`
| `KILLBILL_OSGI_DAO_USER` | `killbill`
| `KILLBILL_OSGI_DAO_USE_SERVER_PREP_STMTS` | `true`
| `KILLBILL_OSGI_ROOT_DIR` | `/var/tmp/felix`
| `KILLBILL_OVERDUE_URI` | `NoOverdueConfig.xml`
| `KILLBILL_PAYMENT_GLOBAL_LOCK_RETRIES` | `50`
| `KILLBILL_PAYMENT_INVOICE_PLUGIN` | ``
| `KILLBILL_PAYMENT_JANITOR_RATE` | `5m`
| `KILLBILL_PAYMENT_PLUGIN_TIMEOUT` | `64s`
| `KILLBILL_PAYMENT_PROVIDER_DEFAULT` | `__EXTERNAL_PAYMENT__`
| `KILLBILL_PAYMENT_RETRY_DAYS` | `8,8,8`
| `KILLBILL_PLUGIN_THREADS_NB` | `100`
| `KILLBILL_RBAC_GLOBAL_SESSION_TIMEOUT` | `1h`
| `KILLBILL_RETRY_MAX_ATTEMPTS` | `8`
| `KILLBILL_RETRY_START_SEC` | `300`
| `KILLBILL_SECURITY_SHIRO_NB_HASH_ITERATIONS` | `200000`
| `KILLBILL_SECURITY_SHIRO_RESOURCE_PATH` | `classpath:shiro.ini`
| `KILLBILL_SERVER_BASE_URL` | `http://127.0.0.1:8080`
| `KILLBILL_SERVER_HTTP_GZIP` | `false`
| `KILLBILL_SERVER_MULTITENANT` | `true`
| `KILLBILL_SERVER_NOTIFICATIONS_RETRIES` | `15m,30m,2h,12h,1d`
| `KILLBILL_SERVER_REGION` | `local`
| `KILLBILL_SERVER_SHUTDOWN_DELAY` | `0s`
| `KILLBILL_SERVER_TEST_MODE` | `true`
| `KILLBILL_TEMPLATE_BUNDLE_PATH` | `org/killbill/billing/util/template/translation/InvoiceTranslation`
| `KILLBILL_TEMPLATE_INVOICE_FORMATTER_FACTORY_CLASS` | `org.killbill.billing.invoice.template.formatters.DefaultInvoiceFormatterFactory`
| `KILLBILL_TEMPLATE_NAME` | `org/killbill/billing/util/email/templates/HtmlInvoiceTemplate.mustache`
| `KILLBILL_TENANT_BROADCAST_RATE` | `5s`
| `KILLBILL_THREADS_POOL_NB` | `30`
| `KILLBILL_UTIL_BROADCAST_RATE` | `5s`

|===


=== Tomcat/Jetty

In case of a https://docs.killbill.io/latest/getting_started.html#_tomcat[Tomcat installation], properties need to be specified within the `TOMCAT_HOME/conf/catalina.properties` file. In case of a https://docs.killbill.io/latest/development.html#_running_the_application[Standalone Jetty setup], properties need to be specified within a  `killbill.properties` file whose path is specified while starting the application via a Java system property as follows:

[source,bash]
----
mvn -Dorg.killbill.server.properties=file:///PROJECT_ROOT/profiles/killbill/src/main/resources/killbill-server.properties
----



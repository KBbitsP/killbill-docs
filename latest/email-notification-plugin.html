<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 2.0.16"><link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" /><link rel="stylesheet" href="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><title>Email Notification Plugin</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
/* @import "https://stylishthemes.github.io/Syntax-Themes/pygments/css-github/pygments-base16-monokai-dark.css"; */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
  display: block;
}
audio,
canvas,
video {
  display: inline-block;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
[hidden],
template {
  display: none;
}
script {
  display: none !important;
}
/* html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%} */
body {
  margin: 0;
}
a {
  background: transparent;
  text-decoration: none !important;
}
a:focus {
  outline: thin dotted;
}
a:active,
a:hover {
  outline: 0;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
abbr[title] {
  border-bottom: 1px dotted;
}
b,
strong {
  font-weight: bold;
}
dfn {
  font-style: italic;
}
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}
mark {
  background: #ff0;
  color: #000;
}
code,
kbd,
pre,
samp {
  font-family: monospace;
  font-size: 1em;
}
pre {
  white-space: pre-wrap;
}
q {
  quotes: "\201C" "\201D" "\2018" "\2019";
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 0;
}
fieldset {
  border: 1px solid silver;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
/* button,input,select,textarea{font-family:inherit;font-size:100%;margin:0} */
button,
input {
  line-height: normal;
}
button,
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  padding: 0;
}
input[type="search"] {
  -webkit-appearance: textfield;
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
}
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
  vertical-align: top;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
*,
*:before,
*:after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
html,
body {
  font-size: 100%;
}
/* body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto} */
a:hover {
  cursor: pointer;
}
img,
object,
embed {
  max-width: 100%;
  height: auto;
}
object,
embed {
  height: 100%;
}
img {
  -ms-interpolation-mode: bicubic;
}
#map_canvas img,
#map_canvas embed,
#map_canvas object,
.map_canvas img,
.map_canvas embed,
.map_canvas object {
  max-width: none !important;
}
.left {
  float: left !important;
}
.right {
  float: right !important;
}
.text-left {
  text-align: left !important;
}
.text-right {
  text-align: right !important;
}
.text-center {
  text-align: center !important;
}
.text-justify {
  text-align: justify !important;
}
.hide {
  display: none;
}
.antialiased,
body {
  -webkit-font-smoothing: antialiased;
}
img {
  display: inline-block;
  vertical-align: middle;
}
textarea {
  height: auto;
  min-height: 50px;
}
select {
  width: 100%;
}
p.lead,
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: 1.21875em;
  line-height: 1.6;
}
.subheader,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  line-height: 1.45;
  color: #7a2518;
  font-weight: 400;
  margin-top: 0;
  margin-bottom: 0.25em;
}
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6,
pre,
form,
p,
blockquote,
th,
td {
  margin: 0;
  padding: 0;
  direction: ltr;
}
a {
  color: #2156a5;
  text-decoration: underline;
  line-height: inherit;
}
a:hover,
a:focus {
  color: #1d4b8f;
}
a img {
  border: none;
}
p {
  font-family: inherit;
  font-weight: 400;
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  text-rendering: optimizeLegibility;
}
p aside {
  font-size: 0.875em;
  line-height: 1.35;
  font-style: italic;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-weight: 300;
  font-style: normal;
  color: #e44c3a;
  text-rendering: optimizeLegibility;
  margin-top: 1em;
  margin-bottom: 0.5em;
  line-height: 1.0125em;
}
h1 small,
h2 small,
h3 small,
#toctitle small,
.sidebarblock > .content > .title small,
h4 small,
h5 small,
h6 small {
  font-size: 60%;
  color: #e99b8f;
  line-height: 0;
}
h1 {
  font-size: 2.125em;
}
h2 {
  font-size: 1.6875em;
}
h3,
#toctitle,
.sidebarblock > .content > .title {
  font-size: 1.375em;
}
h4,
h5 {
  font-size: 1.125em;
}
h6 {
  font-size: 1em;
}
hr {
  border: solid #ddddd8;
  border-width: 1px 0 0;
  clear: both;
  margin: 1.25em 0 1.1875em;
  height: 0;
}
em,
i {
  font-style: italic;
  line-height: inherit;
}
strong,
b {
  font-weight: bold;
  line-height: inherit;
}
small {
  font-size: 60%;
  line-height: inherit;
}
code {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.9);
}
ul,
ol,
dl {
  font-size: 1em;
  line-height: 1.6;
  margin-bottom: 1.25em;
  list-style-position: outside;
  font-family: inherit;
}
ul,
ol,
ul.no-bullet,
ol.no-bullet {
  margin-left: 1.5em;
}
ul li ul,
ul li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
  font-size: 1em;
}
ul.square li ul,
ul.circle li ul,
ul.disc li ul {
  list-style: inherit;
}
ul.square {
  list-style-type: square;
}
ul.circle {
  list-style-type: circle;
}
ul.disc {
  list-style-type: disc;
}
ul.no-bullet {
  list-style: none;
}
ol li ul,
ol li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
}
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}
abbr,
acronym {
  text-transform: uppercase;
  font-size: 90%;
  color: rgba(0, 0, 0, 0.8);
  border-bottom: 1px dotted #ddd;
  cursor: help;
}
abbr {
  text-transform: none;
}
blockquote {
  margin: 0 0 1.25em;
  padding: 0.5625em 1.25em 0 1.1875em;
  border-left: 1px solid #ddd;
}
blockquote cite {
  display: block;
  font-size: 0.9375em;
  color: rgba(0, 0, 0, 0.6);
}
blockquote cite:before {
  content: "\2014 \0020";
}
blockquote cite a,
blockquote cite a:visited {
  color: rgba(0, 0, 0, 0.6);
}
blockquote,
blockquote p {
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.85);
}
@media only screen and (min-width: 768px) {
  h1,
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title,
  h4,
  h5,
  h6 {
    line-height: 1.2;
  }
  h1 {
    font-size: 2.75em;
  }
  h2 {
    font-size: 2.3125em;
  }
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    font-size: 1.6875em;
  }
  h4 {
    font-size: 1.4375em;
  }
}
table {
  /* background: #fff; */
  margin-bottom: 1.25em;
  /* border: solid 1px #dedede; */
}
table thead,
table tfoot {
  /* background: #f7f8f7; */
  font-weight: bold;
}
table thead tr th,
table thead tr td,
table tfoot tr th,
table tfoot tr td {
  padding: 0.5em 0.625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
  text-align: left;
}
table tr th,
table tr td {
  padding: 0.5625em 0.625em;
  font-size: inherit;
  color: rgba(0, 0, 0, 0.8);
}
table tr.even,
table tr.alt,
table tr:nth-of-type(even) {
  background: #f8f8f7;
}
table thead tr th,
table tfoot tr th,
table tbody tr td,
table tr td,
table tfoot tr td {
  display: table-cell;
  line-height: 1.6;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  line-height: 1.2;
  word-spacing: -0.05em;
}
h1 strong,
h2 strong,
h3 strong,
#toctitle strong,
.sidebarblock > .content > .title strong,
h4 strong,
h5 strong,
h6 strong {
  font-weight: 400;
}
.clearfix:before,
.clearfix:after,
.float-group:before,
.float-group:after {
  content: " ";
  display: table;
}
.clearfix:after,
.float-group:after {
  clear: both;
}
*:not(pre) > code {
  font-size: 0.9375em;
  font-style: normal !important;
  letter-spacing: 0;
  padding: 0.1em 0.5ex;
  word-spacing: -0.15em;
  /* background-color: #f7f7f8; */
  -webkit-border-radius: 4px;
  border-radius: 4px;
  line-height: 1.45;
  text-rendering: optimizeSpeed;
}
pre,
pre > code {
  line-height: 1.45;
  /* color: rgba(0, 0, 0, 0.9); */
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  text-rendering: optimizeSpeed;
}
.keyseq {
  color: rgba(51, 51, 51, 0.8);
}
kbd {
  display: inline-block;
  color: rgba(0, 0, 0, 0.8);
  font-size: 0.75em;
  line-height: 1.4;
  background-color: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em #fff inset;
  margin: -0.15em 0.15em 0 0.15em;
  padding: 0.2em 0.6em 0.2em 0.5em;
  vertical-align: middle;
  white-space: nowrap;
}
.keyseq kbd:first-child {
  margin-left: 0;
}
.keyseq kbd:last-child {
  margin-right: 0;
}
.menuseq,
.menu {
  color: rgba(0, 0, 0, 0.8);
}
b.button:before,
b.button:after {
  position: relative;
  top: -1px;
  font-weight: 400;
}
b.button:before {
  content: "[";
  padding: 0 3px 0 2px;
}
b.button:after {
  content: "]";
  padding: 0 2px 0 3px;
}
p a > code:hover {
  color: rgba(0, 0, 0, 0.9);
}
#header,
#content,
#footnotes,
#footer {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 0;
  margin-bottom: 0;
  *zoom: 1;
  position: relative;
  padding-left: 0.9375em;
  padding-right: 0.9375em;
}
#header:before,
#header:after,
#content:before,
#content:after,
#footnotes:before,
#footnotes:after,
#footer:before,
#footer:after {
  content: " ";
  display: table;
}
#header:after,
#content:after,
#footnotes:after,
#footer:after {
  clear: both;
}
#content {
  margin-top: 1.25em;
}
#content:before {
  content: none;
}
#header > h1:first-child {
  color: rgba(0, 0, 0, 0.85);
  margin-top: 2.25rem;
  margin-bottom: 0;
}
#header > h1:first-child + #toc {
  margin-top: 8px;
  border-top: 1px solid #ddddd8;
}
#header > h1:only-child,
body.toc2 #header > h1:nth-last-child(2) {
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
}
#header .details {
  border-bottom: 1px solid #ddddd8;
  line-height: 1.45;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
  padding-left: 0.25em;
  color: rgba(0, 0, 0, 0.6);
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -ms-flex-flow: row wrap;
  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;
}
#header .details span:first-child {
  margin-left: -0.125em;
}
#header .details span.email a {
  color: rgba(0, 0, 0, 0.85);
}
#header .details br {
  display: none;
}
#header .details br + span:before {
  content: "\00a0\2013\00a0";
}
#header .details br + span.author:before {
  content: "\00a0\22c5\00a0";
  color: rgba(0, 0, 0, 0.85);
}
#header .details br + span#revremark:before {
  content: "\00a0|\00a0";
}
#header #revnumber {
  text-transform: capitalize;
}
#header #revnumber:after {
  content: "\00a0";
}
#content > h1:first-child:not([class]) {
  color: rgba(0, 0, 0, 0.85);
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
  margin-top: 0;
  padding-top: 1rem;
  margin-bottom: 1.25rem;
}
#toc {
  border-bottom: 1px solid #efefed;
  padding-bottom: 0.5em;
}
#toc > ul {
  margin-left: 0.125em;
}
#toc ul.sectlevel0 > li > a {
  font-style: italic;
}
#toc ul.sectlevel0 ul.sectlevel1 {
  margin: 0.5em 0;
}
#toc ul {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  list-style-type: none;
}
#toc a {
  text-decoration: none;
}
#toc a:active {
  text-decoration: underline;
}
#toctitle {
  color: #7a2518;
  font-size: 1.2em;
}
@media only screen and (min-width: 768px) {
  #toctitle {
    font-size: 1.375em;
  }
  body.toc2 {
    padding-left: 15em;
    padding-right: 0;
  }
  #toc.toc2 {
    margin-top: 0 !important;
    background-color: #f8f8f7;
    position: fixed;
    width: 15em;
    left: 0;
    top: 0;
    border-right: 1px solid #efefed;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
  #toc.toc2 #toctitle {
    margin-top: 0;
    font-size: 1.2em;
  }
  #toc.toc2 > ul {
    font-size: 0.9em;
    margin-bottom: 0;
  }
  #toc.toc2 ul ul {
    margin-left: 0;
    padding-left: 1em;
  }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
    padding-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 15em;
  }
  body.toc2.toc-right #toc.toc2 {
    border-right-width: 0;
    border-left: 1px solid #efefed;
    left: auto;
    right: 0;
  }
}
@media only screen and (min-width: 1280px) {
  body.toc2 {
    padding-left: 20em;
    padding-right: 0;
  }
  #toc.toc2 {
    width: 20em;
  }
  #toc.toc2 #toctitle {
    font-size: 1.375em;
  }
  #toc.toc2 > ul {
    font-size: 0.95em;
  }
  #toc.toc2 ul ul {
    padding-left: 1.25em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 20em;
  }
}
#content #toc {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
#content #toc > :first-child {
  margin-top: 0;
}
#content #toc > :last-child {
  margin-bottom: 0;
}
#footer {
  max-width: 100%;
  background-color: #2e3336;
  padding: 1.25em;
}
#footer-text {
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.44;
}
.sect1 {
  padding-bottom: 0.625em;
}
@media only screen and (min-width: 768px) {
  .sect1 {
    padding-bottom: 1.25em;
  }
}
.sect1 + .sect1 {
  border-top: 1px solid #efefed;
}
#content h1 > a.anchor,
h2 > a.anchor,
h3 > a.anchor,
#toctitle > a.anchor,
.sidebarblock > .content > .title > a.anchor,
h4 > a.anchor,
h5 > a.anchor,
h6 > a.anchor {
  position: absolute;
  z-index: 1001;
  width: 1.5ex;
  margin-left: -1.5ex;
  display: block;
  text-decoration: none !important;
  visibility: hidden;
  text-align: center;
  font-weight: 400;
}
#content h1 > a.anchor:before,
h2 > a.anchor:before,
h3 > a.anchor:before,
#toctitle > a.anchor:before,
.sidebarblock > .content > .title > a.anchor:before,
h4 > a.anchor:before,
h5 > a.anchor:before,
h6 > a.anchor:before {
  content: "\00A7";
  font-size: 0.85em;
  display: block;
  padding-top: 0.1em;
}
#content h1:hover > a.anchor,
#content h1 > a.anchor:hover,
h2:hover > a.anchor,
h2 > a.anchor:hover,
h3:hover > a.anchor,
#toctitle:hover > a.anchor,
.sidebarblock > .content > .title:hover > a.anchor,
h3 > a.anchor:hover,
#toctitle > a.anchor:hover,
.sidebarblock > .content > .title > a.anchor:hover,
h4:hover > a.anchor,
h4 > a.anchor:hover,
h5:hover > a.anchor,
h5 > a.anchor:hover,
h6:hover > a.anchor,
h6 > a.anchor:hover {
  visibility: visible;
}
#content h1 > a.link,
h2 > a.link,
h3 > a.link,
#toctitle > a.link,
.sidebarblock > .content > .title > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link {
  color: #e44c3a;
  text-decoration: none;
}
#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover {
  color: #a53221;
}
.audioblock,
.imageblock,
.literalblock,
.listingblock,
.stemblock,
.videoblock {
  margin-bottom: 1.25em;
}
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  text-rendering: optimizeLegibility;
  text-align: left;
  font-family: "Noto Serif", "DejaVu Serif", serif;
  font-size: 1rem;
  font-style: italic;
}
table.tableblock > caption.title {
  white-space: nowrap;
  overflow: visible;
  max-width: 0;
}
.paragraph.lead > p,
#preamble > .sectionbody > .paragraph:first-of-type p {
  color: rgba(0, 0, 0, 0.85);
}
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
  font-size: inherit;
}
.admonitionblock > table {
  border-collapse: separate;
  border: 0;
  background: none;
  width: 100%;
}
.admonitionblock > table td.icon {
  text-align: center;
  width: 80px;
}
.admonitionblock > table td.icon img {
  max-width: none;
}
.admonitionblock > table td.icon .title {
  font-weight: bold;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  text-transform: uppercase;
}
.admonitionblock > table td.content {
  padding-left: 1.125em;
  padding-right: 1.25em;
  border-left: 1px solid #ddddd8;
  color: rgba(0, 0, 0, 0.6);
}
.admonitionblock > table td.content > :last-child > :last-child {
  margin-bottom: 0;
}
.exampleblock > .content {
  border-style: solid;
  border-width: 1px;
  border-color: #e6e6e6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #fff;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.exampleblock > .content > :first-child {
  margin-top: 0;
}
.exampleblock > .content > :last-child {
  margin-bottom: 0;
}
.sidebarblock {
  border-style: solid;
  border-width: 1px;
  border-color: #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.sidebarblock > :first-child {
  margin-top: 0;
}
.sidebarblock > :last-child {
  margin-bottom: 0;
}
.sidebarblock > .content > .title {
  color: #7a2518;
  margin-top: 0;
  text-align: center;
}
.exampleblock > .content > :last-child > :last-child,
.exampleblock > .content .olist > ol > li:last-child > :last-child,
.exampleblock > .content .ulist > ul > li:last-child > :last-child,
.exampleblock > .content .qlist > ol > li:last-child > :last-child,
.sidebarblock > .content > :last-child > :last-child,
.sidebarblock > .content .olist > ol > li:last-child > :last-child,
.sidebarblock > .content .ulist > ul > li:last-child > :last-child,
.sidebarblock > .content .qlist > ol > li:last-child > :last-child {
  margin-bottom: 0;
}
.literalblock pre,
.listingblock pre[class="highlight"],
.listingblock pre[class^="highlight "],
.listingblock pre.CodeRay,
.listingblock pre.prettyprint {
  background: #f7f7f8;
}
.sidebarblock .literalblock pre,
.sidebarblock .listingblock pre[class="highlight"],
.sidebarblock .listingblock pre[class^="highlight "],
.sidebarblock .listingblock pre.CodeRay,
.sidebarblock .listingblock pre.prettyprint {
  background: #f2f1f1;
}
.literalblock pre,
.literalblock pre[class],
.listingblock pre,
.listingblock pre[class] {
  -webkit-border-radius: 4px;
  border-radius: 4px;
  word-wrap: break-word;
  padding: 1em;
  font-size: 0.8125em;
}
.literalblock pre.nowrap,
.literalblock pre[class].nowrap,
.listingblock pre.nowrap,
.listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal;
}
@media only screen and (min-width: 768px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 0.90625em;
  }
}
@media only screen and (min-width: 1280px) {
  .literalblock pre,
  .literalblock pre[class],
  .listingblock pre,
  .listingblock pre[class] {
    font-size: 1em;
  }
}
.literalblock.output pre {
  color: #f7f7f8;
  background-color: rgba(0, 0, 0, 0.9);
}
.listingblock pre.highlightjs {
  padding: 0;
}
.listingblock pre.highlightjs > code {
  padding: 1em;
  -webkit-border-radius: 4px;
  border-radius: 4px;
}
.listingblock pre.prettyprint {
  border-width: 0;
}
.listingblock > .content {
  position: relative;
}
.listingblock code[data-lang]:before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 0.425rem;
  right: 0.5rem;
  line-height: 1;
  text-transform: uppercase;
  color: #999;
}
.listingblock:hover code[data-lang]:before {
  display: block;
}
.listingblock.terminal pre .command:before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: #999;
}
.listingblock.terminal pre .command:not([data-prompt]):before {
  content: "$";
}
table.pyhltable {
  border-collapse: separate;
  border: 0;
  margin-bottom: 0;
  background: none;
}
table.pyhltable td {
  vertical-align: top;
  padding-top: 0;
  padding-bottom: 0;
}
table.pyhltable td.code {
  padding-left: 0.75em;
  padding-right: 0;
}
pre.pygments .lineno,
table.pyhltable td:not(.code) {
  color: #999;
  padding-left: 0;
  padding-right: 0.5em;
  border-right: 1px solid #ddddd8;
}
pre.pygments .lineno {
  display: inline-block;
  margin-right: 0.25em;
}
table.pyhltable .linenodiv {
  background: none !important;
  padding-right: 0 !important;
}
.quoteblock {
  margin: 0 1em 1.25em 1.5em;
  display: table;
}
.quoteblock > .title {
  margin-left: -1.5em;
  margin-bottom: 0.75em;
}
.quoteblock blockquote,
.quoteblock blockquote p {
  color: rgba(0, 0, 0, 0.85);
  font-size: 1.15rem;
  line-height: 1.75;
  word-spacing: 0.1em;
  letter-spacing: 0;
  font-style: italic;
  text-align: justify;
}
.quoteblock blockquote {
  margin: 0;
  padding: 0;
  border: 0;
}
.quoteblock blockquote:before {
  content: "\201c";
  float: left;
  font-size: 2.75em;
  font-weight: bold;
  line-height: 0.6em;
  margin-left: -0.6em;
  color: #7a2518;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.quoteblock blockquote > .paragraph:last-child p {
  margin-bottom: 0;
}
.quoteblock .attribution {
  margin-top: 0.5em;
  margin-right: 0.5ex;
  text-align: right;
}
.quoteblock .quoteblock {
  margin-left: 0;
  margin-right: 0;
  padding: 0.5em 0;
  border-left: 3px solid rgba(0, 0, 0, 0.6);
}
.quoteblock .quoteblock blockquote {
  padding: 0 0 0 0.75em;
}
.quoteblock .quoteblock blockquote:before {
  display: none;
}
.verseblock {
  margin: 0 1em 1.25em 1em;
}
.verseblock pre {
  font-family: "Open Sans", "DejaVu Sans", sans;
  font-size: 1.15rem;
  color: rgba(0, 0, 0, 0.85);
  font-weight: 300;
  text-rendering: optimizeLegibility;
}
.verseblock pre strong {
  font-weight: 400;
}
.verseblock .attribution {
  margin-top: 1.25rem;
  margin-left: 0.5ex;
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size: 0.9375em;
  line-height: 1.45;
  font-style: italic;
}
.quoteblock .attribution br,
.verseblock .attribution br {
  display: none;
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  display: block;
  letter-spacing: -0.05em;
  color: rgba(0, 0, 0, 0.6);
}
.quoteblock.abstract {
  margin: 0 0 1.25em 0;
  display: block;
}
.quoteblock.abstract blockquote,
.quoteblock.abstract blockquote p {
  text-align: left;
  word-spacing: 0;
}
.quoteblock.abstract blockquote:before,
.quoteblock.abstract blockquote p:first-of-type:before {
  display: none;
}
table.tableblock {
  max-width: 100%;
  border-collapse: separate;
}
table.tableblock td > .paragraph:last-child p > p:last-child,
table.tableblock th > p:last-child,
table.tableblock td > p:last-child {
  margin-bottom: 0;
}
table.spread {
  width: 100%;
}
table.tableblock,
th.tableblock,
td.tableblock {
  border: 0 solid #dedede;
}
table.grid-all th.tableblock,
table.grid-all td.tableblock {
  border-width: 0 1px 1px 0;
}
table.grid-all tfoot > tr > th.tableblock,
table.grid-all tfoot > tr > td.tableblock {
  border-width: 1px 1px 0 0;
}
table.grid-cols th.tableblock,
table.grid-cols td.tableblock {
  border-width: 0 1px 0 0;
}
table.grid-all * > tr > .tableblock:last-child,
table.grid-cols * > tr > .tableblock:last-child {
  border-right-width: 0;
}
table.grid-rows th.tableblock,
table.grid-rows td.tableblock {
  border-width: 0 0 1px 0;
}
table.grid-all tbody > tr:last-child > th.tableblock,
table.grid-all tbody > tr:last-child > td.tableblock,
table.grid-all thead:last-child > tr > th.tableblock,
table.grid-rows tbody > tr:last-child > th.tableblock,
table.grid-rows tbody > tr:last-child > td.tableblock,
table.grid-rows thead:last-child > tr > th.tableblock {
  border-bottom-width: 0;
}
table.grid-rows tfoot > tr > th.tableblock,
table.grid-rows tfoot > tr > td.tableblock {
  border-width: 1px 0 0 0;
}
table.frame-all {
  border-width: 1px;
}
table.frame-sides {
  border-width: 0 1px;
}
table.frame-topbot {
  border-width: 1px 0;
}
th.halign-left,
td.halign-left {
  text-align: left;
}
th.halign-right,
td.halign-right {
  text-align: right;
}
th.halign-center,
td.halign-center {
  text-align: center;
}
th.valign-top,
td.valign-top {
  vertical-align: top;
}
th.valign-bottom,
td.valign-bottom {
  vertical-align: bottom;
}
th.valign-middle,
td.valign-middle {
  vertical-align: middle;
}
table thead th,
table tfoot th {
  font-weight: bold;
}
tbody tr th {
  display: table-cell;
  line-height: 1.6;
  background: #f7f8f7;
}
tbody tr th,
tbody tr th p,
tfoot tr th,
tfoot tr th p {
  color: rgba(0, 0, 0, 0.8);
  font-weight: bold;
}
p.tableblock > code:only-child {
  background: none;
  padding: 0;
}
p.tableblock {
  font-size: 1em;
}
td > div.verse {
  white-space: pre;
}
ol {
  margin-left: 1.75em;
}
ul li ol {
  margin-left: 1.5em;
}
dl dd {
  margin-left: 1.125em;
}
dl dd:last-child,
dl dd:last-child > :last-child {
  margin-bottom: 0;
}
ol > li p,
ul > li p,
ul dd,
ol dd,
.olist .olist,
.ulist .ulist,
.ulist .olist,
.olist .ulist {
  margin-bottom: 0.625em;
}
ul.unstyled,
ol.unnumbered,
ul.checklist,
ul.none {
  list-style-type: none;
}
ul.unstyled,
ol.unnumbered,
ul.checklist {
  margin-left: 0.625em;
}
ul.checklist li > p:first-child > .fa-square-o:first-child,
ul.checklist li > p:first-child > .fa-check-square-o:first-child {
  width: 1em;
  font-size: 0.85em;
}
ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
  width: 1em;
  position: relative;
  top: 1px;
}
ul.inline {
  margin: 0 auto 0.625em auto;
  margin-left: -1.375em;
  margin-right: 0;
  padding: 0;
  list-style: none;
  overflow: hidden;
}
ul.inline > li {
  list-style: none;
  float: left;
  margin-left: 1.375em;
  display: block;
}
ul.inline > li > * {
  display: block;
}
.unstyled dl dt {
  font-weight: 400;
  font-style: normal;
}
ol.arabic {
  list-style-type: decimal;
}
ol.decimal {
  list-style-type: decimal-leading-zero;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}
ol.lowergreek {
  list-style-type: lower-greek;
}
.hdlist > table,
.colist > table {
  border: 0;
  background: none;
}
.hdlist > table > tbody > tr,
.colist > table > tbody > tr {
  background: none;
}
td.hdlist1 {
  padding-right: 0.75em;
  font-weight: bold;
}
td.hdlist1,
td.hdlist2 {
  vertical-align: top;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -0.5em;
}
.colist > table tr > td:first-of-type {
  padding: 0 0.75em;
  line-height: 1;
}
.colist > table tr > td:last-of-type {
  padding: 0.25em 0;
}
.thumb,
.th {
  line-height: 0;
  display: inline-block;
  border: solid 4px #fff;
  -webkit-box-shadow: 0 0 0 1px #ddd;
  box-shadow: 0 0 0 1px #ddd;
}
.imageblock.left,
.imageblock[style*="float: left"] {
  margin: 0.25em 0.625em 1.25em 0;
}
.imageblock.right,
.imageblock[style*="float: right"] {
  margin: 0.25em 0 1.25em 0.625em;
}
.imageblock > .title {
  margin-bottom: 0;
}
.imageblock.thumb,
.imageblock.th {
  border-width: 6px;
}
.imageblock.thumb > .title,
.imageblock.th > .title {
  padding: 0 0.125em;
}
.image.left,
.image.right {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  display: inline-block;
  line-height: 0;
}
.image.left {
  margin-right: 0.625em;
}
.image.right {
  margin-left: 0.625em;
}
a.image {
  text-decoration: none;
}
span.footnote,
span.footnoteref {
  vertical-align: super;
  font-size: 0.875em;
}
span.footnote a,
span.footnoteref a {
  text-decoration: none;
}
span.footnote a:active,
span.footnoteref a:active {
  text-decoration: underline;
}
#footnotes {
  padding-top: 0.75em;
  padding-bottom: 0.75em;
  margin-bottom: 0.625em;
}
#footnotes hr {
  width: 20%;
  min-width: 6.25em;
  margin: -0.25em 0 0.75em 0;
  border-width: 1px 0 0 0;
}
#footnotes .footnote {
  padding: 0 0.375em;
  line-height: 1.3;
  font-size: 0.875em;
  margin-left: 1.2em;
  text-indent: -1.2em;
  margin-bottom: 0.2em;
}
#footnotes .footnote a:first-of-type {
  font-weight: bold;
  text-decoration: none;
}
#footnotes .footnote:last-of-type {
  margin-bottom: 0;
}
#content #footnotes {
  margin-top: -0.625em;
  margin-bottom: 0;
  padding: 0.75em 0;
}
.gist .file-data > table {
  border: 0;
  background: #fff;
  width: 100%;
  margin-bottom: 0;
}
.gist .file-data > table td.line-data {
  width: 99%;
}
div.unbreakable {
  page-break-inside: avoid;
}
.big {
  font-size: larger;
}
.small {
  font-size: smaller;
}
.underline {
  text-decoration: underline;
}
.overline {
  text-decoration: overline;
}
.line-through {
  text-decoration: line-through;
}
.aqua {
  color: #00bfbf;
}
.aqua-background {
  background-color: #00fafa;
}
.black {
  color: #000;
}
.black-background {
  background-color: #000;
}
.blue {
  color: #0000bf;
}
.blue-background {
  background-color: #0000fa;
}
.fuchsia {
  color: #bf00bf;
}
.fuchsia-background {
  background-color: #fa00fa;
}
.gray {
  color: #606060;
}
.gray-background {
  background-color: #7d7d7d;
}
.green {
  color: #006000;
}
.green-background {
  background-color: #007d00;
}
.lime {
  color: #00bf00;
}
.lime-background {
  background-color: #00fa00;
}
.maroon {
  color: #600000;
}
.maroon-background {
  background-color: #7d0000;
}
.navy {
  color: #000060;
}
.navy-background {
  background-color: #00007d;
}
.olive {
  color: #606000;
}
.olive-background {
  background-color: #7d7d00;
}
.purple {
  color: #600060;
}
.purple-background {
  background-color: #7d007d;
}
.red {
  color: #bf0000;
}
.red-background {
  background-color: #fa0000;
}
.silver {
  color: #909090;
}
.silver-background {
  background-color: #bcbcbc;
}
.teal {
  color: #006060;
}
.teal-background {
  background-color: #007d7d;
}
.white {
  color: #bfbfbf;
}
.white-background {
  background-color: #fafafa;
}
.yellow {
  color: #bfbf00;
}
.yellow-background {
  background-color: #fafa00;
}
span.icon > .fa {
  cursor: default;
}
.admonitionblock td.icon [class^="fa icon-"] {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  cursor: default;
}
.admonitionblock td.icon .icon-note:before {
  content: "\f05a";
  color: #19407c;
}
.admonitionblock td.icon .icon-tip:before {
  content: "\f0eb";
  text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
  color: #111;
}
.admonitionblock td.icon .icon-warning:before {
  content: "\f071";
  color: #bf6900;
}
.admonitionblock td.icon .icon-caution:before {
  content: "\f06d";
  color: #bf3400;
}
.admonitionblock td.icon .icon-important:before {
  content: "\f06a";
  color: #bf0000;
}
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background-color: rgba(0, 0, 0, 0.8);
  -webkit-border-radius: 100px;
  border-radius: 100px;
  text-align: center;
  font-size: 0.75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold;
}
.conum[data-value] * {
  color: #fff !important;
}
.conum[data-value] + b {
  display: none;
}
.conum[data-value]:after {
  content: attr(data-value);
}
pre .conum[data-value] {
  position: relative;
  top: -0.125em;
}
b.conum * {
  color: inherit !important;
}
.conum:not([data-value]):empty {
  display: none;
}
h1,
h2 {
  letter-spacing: -0.01em;
}
dt,
th.tableblock,
td.content {
  text-rendering: optimizeLegibility;
}
p,
td.content {
  letter-spacing: -0.01em;
}
p strong,
td.content strong {
  letter-spacing: -0.005em;
}
p,
blockquote,
dt,
td.content {
  font-size: 1.0625rem;
}
p {
  margin-bottom: 1.25rem;
}
.sidebarblock p,
.sidebarblock dt,
.sidebarblock td.content,
p.tableblock {
  font-size: 1em;
}
.exampleblock > .content {
  background-color: #fffef7;
  border-color: #e0e0dc;
  -webkit-box-shadow: 0 1px 4px #e0e0dc;
  box-shadow: 0 1px 4px #e0e0dc;
}
.print-only {
  display: none !important;
}
@media print {
  @page {
    margin: 1.25cm 0.75cm;
  }
  * {
    -webkit-box-shadow: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  a {
    color: inherit !important;
    text-decoration: underline !important;
  }
  a.bare,
  a[href^="#"],
  a[href^="mailto:"] {
    text-decoration: none !important;
  }
  a[href^="http:"]:not(.bare):after,
  a[href^="https:"]:not(.bare):after {
    content: "(" attr(href) ")";
    display: inline-block;
    font-size: 0.875em;
    padding-left: 0.25em;
  }
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
  pre,
  blockquote,
  tr,
  img {
    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  img {
    max-width: 100% !important;
  }
  p,
  blockquote,
  dt,
  td.content {
    font-size: 1em;
    orphans: 3;
    widows: 3;
  }
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    page-break-after: avoid;
  }
  #toc,
  .sidebarblock,
  .exampleblock > .content {
    background: none !important;
  }
  #toc {
    border-bottom: 1px solid #ddddd8 !important;
    padding-bottom: 0 !important;
  }
  .sect1 {
    padding-bottom: 0 !important;
  }
  .sect1 + .sect1 {
    border: 0 !important;
  }
  #header > h1:first-child {
    margin-top: 1.25rem;
  }
  body.book #header {
    text-align: center;
  }
  body.book #header > h1:first-child {
    border: 0 !important;
    margin: 2.5em 0 1em 0;
  }
  body.book #header .details {
    border: 0 !important;
    display: block;
    padding: 0 !important;
  }
  body.book #header .details span:first-child {
    margin-left: 0 !important;
  }
  body.book #header .details br {
    display: block;
  }
  body.book #header .details br + span:before {
    content: none !important;
  }
  body.book #toc {
    border: 0 !important;
    text-align: left !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  body.book #toc,
  body.book #preamble,
  body.book h1.sect0,
  body.book .sect1 > h2 {
    page-break-before: always;
  }
  .listingblock code[data-lang]:before {
    display: block;
  }
  #footer {
    background: none !important;
    padding: 0 0.9375em;
  }
  #footer-text {
    color: rgba(0, 0, 0, 0.6) !important;
    font-size: 0.9em;
  }
  .hide-on-print {
    display: none !important;
  }
  .print-only {
    display: block !important;
  }
  .hide-for-print {
    display: none !important;
  }
  .show-for-print {
    display: inherit !important;
  }
}

.pygments .highlight pre,
pre > code {
  color: #f8f8f2 !important;
}

/*Custom CSS*/
body {
  background: #f5f5f5;
}
#header-main-title {
  float: left;
}
#cards {
  clear: both;
}
#cards .btn-primary {
  background-color: #e44c3a;
  border-color: #e44c3a;
}
#asciinema-player-section {
  margin-bottom: 25px;
}
.logo {
  width: 70%;
  padding-top: 20px;
  padding-bottom: 10px;
}
#main-row {
  min-height: 100%;
  height: 100%;
}
#toc {
  border-bottom: none;
  overflow-y: auto;
  margin: 0;
  top: 0px;
  z-index: 9;
}

#toc .nav-link {
  font-size: 13px;
}
.toc {
  margin-top: 116px;
  word-break: break-all;
  max-width: 223px;
}
#toctitle {
  font-size: 1.2em;
}
#aws-link {
  width: 80%;
}
.sectlevel1 {
  padding-left: 7px;
}
/* .border-columns{ */
/* background-color: #2E3336; */
/* } */
.footer {
  display: block;
  bottom: 0;
  width: 75%;
  height: 40px;
  line-height: 40px;
  background-color: #2e3336;
  margin: 0 auto;
}
.footer > .container {
  padding-right: 15px;
  padding-left: 15px;
}
nav[data-toggle="toc"] .nav > li > a {
  display: block;
  padding: 4px 20px;
  font-size: 13px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.65);
}
nav[data-toggle="toc"] .nav > li > a:hover {
  background-color: #e44c3a;
  color: rgba(0, 0, 0, 0.65);
}
.text-muted {
  color: rgba(0, 0, 0, 0.65) !important;
}
nav[data-toggle="toc"] .nav .nav > li > a,
nav[data-toggle="toc"] .nav .nav > li > a:focus,
nav[data-toggle="toc"] .nav .nav > li > a:hover {
  padding-left: 10px;
}
nav[data-toggle="toc"] .nav .nav > li > .active,
nav[data-toggle="toc"] .nav .nav > li > .active:focus,
nav[data-toggle="toc"] .nav .nav > li > .active:hover,
nav[data-toggle="toc"] .nav-link.active,
nav[data-toggle="toc"] .nav-link.active:focus,
nav[data-toggle="toc"] .nav-link.active:hover {
  /* padding-left: 10px; */
  font-weight: 700;
  color: #e44c3a;
  background-color: transparent;
  border-left: 2px solid #e44c3a;
}
#toc > ul > li > ul {
  margin-left: 10px;
}

/* small screens */
@media (max-width: 767px) {
  /* override stickyness so that the navigation does not follow scrolling */
  nav[data-toggle="toc"] {
    margin-bottom: 42px;
  }
  nav[data-toggle="toc"] .nav .active .nav {
    display: none;
  }
  #aws-link {
    width: 50%;
    margin-bottom: 5px;
  }
  .border-right {
    border: none !important;
  }
}

html,
body {
  height: 100%;
}

/* Scrollbar styles */
#toc::-webkit-scrollbar {
  width: 3px;
}

/* Track */
#toc::-webkit-scrollbar-track {
  background: transparent;
}

/* Handle */
#toc::-webkit-scrollbar-thumb {
  background: rgb(182, 182, 182);
}

/* Handle on hover */
#toc::-webkit-scrollbar-thumb:hover {
  background: rgb(163, 163, 163);
}

/* Gernal styles */
.toggle-nav-btn {
  position: absolute;
  right: 30px;
  top: 34px;
}
.bd-sidebar {
  height: 100vh !important;
}
.bd-sidebar .nav > li > a {
  padding: 4px 20px;
  font-size: 13px;
  font-weight: 500;
  color: rgba(0, 0, 0, 0.65);
  padding-left: 12px;
}
.main-link {
  border-left: 2px solid #e44c3a;
  color: #ba3925 !important;
  cursor: pointer;
  font-weight: bold;
}

/* card styles */
.card-wrapper {
  height: min-content;
  -webkit-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Safari 3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
  -moz-box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* Firefox 3.5 - 3.6 */
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
}
.card-wrapper .card-body {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.card-wrapper .content .card-text {
  margin-bottom: 12px;
}
.card-wrapper .card-body .card-title {
  color: #e44c3a;
  font-size: 22px;
  font-weight: 500;
}
.LogoAndToggle {
  border-bottom: 1px solid gainsboro;
  margin: 0px;
  display: block;
  padding-bottom: 12px;
  background: whitesmoke;
  padding-top: 4px;
}
/* media quires */
@media (max-width: 767px) {
  .bd-sidebar {
    height: 100px !important;
    border: 0;
  }

  #toc {
    min-width: 100%;
    padding-top: 15px;
  }
  #toc.show {
    border-bottom: none;
    left: 0;
    min-width: 100%;
    margin: 0;
    padding-top: 15px;
    box-shadow: 0px 7px 10px 2px #ababab3b;
  }
  .LogoAndToggle {
    display: flex;
    justify-content: space-around;
    width: 100%;
    margin: 0;
  }
  .bd-links {
    background: white;
    z-index: 9;
    position: relative;
    max-height: 300px;
    overflow-y: scroll;
    margin-top: -5px;
    border-bottom: 1px solid #d6d6d6;
  }
}
@media (min-width: 768px) {
  .bd-links {
    height: 100% !important;
    overflow-y: auto;
    display: block !important;
  }
  #toc {
    position: relative;
    top: 0;
    max-width: 100%;
    margin: 0;
    padding-left: 10px;
  }
  .toc {
    /* height: calc(100vh - 97px) !important; */
    height: calc(100vh - 160px) !important;
  }
  .bd-sidebar {
    padding-right: 20px;
    top: 0 !important;
  }
}

.bdr-right {
  border-right: 1px solid gainsboro;
}
.bdr-left {
  border-left: 1px solid gainsboro;
}

nav[data-toggle="toc"] .nav > li > a:focus,
nav[data-toggle="toc"] .nav > li > a:hover {
  border-left: 2px solid #e44c3a;
}
nav[data-toggle="toc"] .nav > li > a:hover {
  background-color: #ba39251a;
  color: rgba(0, 0, 0, 0.65);
}
/* pre.pygments .tok-n , pre.pygments .tok-p{
    color: rgba(0,0,0,.9) !important;
} */

table.linenotable {
  width: 100%;
}
.pygments code {
  width: max-content;
  overflow-x: auto;
  display: block;
  min-width: 100%;
}
.bd-search {
  padding: 0;
  margin: auto;
  padding-bottom: 10px;
  padding-top: 10px;
}
@media (max-width: 767px) {
  .bd-search {
    background-color: white;
    border-bottom: 1px solid #ddddd7;
  }
}
.bd-search .algolia-autocomplete {
  width: 100%;
}
.bd-search input {
  border-color: #3333331c;
  left: 0px;
  margin: auto;
  padding: 0;
  padding: 7px;
  width: 90%;
  max-width: 90%;
}

.bd-search .form-control:focus {
  border-color: #e44c3a61;
  box-shadow: 0 0 0 3px rgb(237 152 142 / 50%);
}
.bd-links {
  padding-top: 1rem;
}

/* Blue #167bb7 */
/* Green #29a9c9 */
/* Red #e44c3a */

#toc.right-side-menu ul li ul {
  padding: 0;
}
#toc.right-side-menu ul li ul {
  margin: 0;
}
#toc.right-side-menu ul li ul li a {
  padding-left: 30px !important;
  border-left: 2px solid #33333326;
}
#toc.right-side-menu ul li ul li a.active {
  padding-left: 30px !important;
  border-left: 2px solid #e44c3a;
  font-weight: 600 !important;
}

nav.right-side-menu .nav > li > a {
  display: block;
}
nav.right-side-menu > ul > li > a {
  color: #e44c3a;
  font-weight: 800 !important;
  background-color: transparent;
  border-left: 2px solid #33333326;
}
nav.right-side-menu > ul > li > a.active {
  color: #e44c3a;
  background-color: transparent;
  border-left: 2px solid #e44c3a;
}
nav[data-toggle="toc"].right-side-menu .nav-link + ul {
  display: block;
}

pre.pygments .tok-mf, pre.pygments .tok-mi{
  color: #f8f8f2 !important
}
</style>
<style>pre { line-height: 125%; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #49483e }
pre.pygments { background: #272822; color: #f8f8f2 }
pre.pygments .tok-c { color: #75715e } /* Comment */
pre.pygments .tok-err { color: #960050; background-color: #1e0010 } /* Error */
pre.pygments .tok-k { color: #66d9ef } /* Keyword */
pre.pygments .tok-l { color: #ae81ff } /* Literal */
pre.pygments .tok-n { color: #f8f8f2 } /* Name */
pre.pygments .tok-o { color: #f92672 } /* Operator */
pre.pygments .tok-p { color: #f8f8f2 } /* Punctuation */
pre.pygments .tok-ch { color: #75715e } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #75715e } /* Comment.Multiline */
pre.pygments .tok-cp { color: #75715e } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #75715e } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #75715e } /* Comment.Single */
pre.pygments .tok-cs { color: #75715e } /* Comment.Special */
pre.pygments .tok-gd { color: #f92672 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gi { color: #a6e22e } /* Generic.Inserted */
pre.pygments .tok-go { color: #66d9ef } /* Generic.Output */
pre.pygments .tok-gp { color: #f92672; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #75715e } /* Generic.Subheading */
pre.pygments .tok-kc { color: #66d9ef } /* Keyword.Constant */
pre.pygments .tok-kd { color: #66d9ef } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #f92672 } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #66d9ef } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #66d9ef } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #66d9ef } /* Keyword.Type */
pre.pygments .tok-ld { color: #e6db74 } /* Literal.Date */
pre.pygments .tok-m { color: #ae81ff } /* Literal.Number */
pre.pygments .tok-s { color: #e6db74 } /* Literal.String */
pre.pygments .tok-na { color: #a6e22e } /* Name.Attribute */
pre.pygments .tok-nb { color: #f8f8f2 } /* Name.Builtin */
pre.pygments .tok-nc { color: #a6e22e } /* Name.Class */
pre.pygments .tok-no { color: #66d9ef } /* Name.Constant */
pre.pygments .tok-nd { color: #a6e22e } /* Name.Decorator */
pre.pygments .tok-ni { color: #f8f8f2 } /* Name.Entity */
pre.pygments .tok-ne { color: #a6e22e } /* Name.Exception */
pre.pygments .tok-nf { color: #a6e22e } /* Name.Function */
pre.pygments .tok-nl { color: #f8f8f2 } /* Name.Label */
pre.pygments .tok-nn { color: #f8f8f2 } /* Name.Namespace */
pre.pygments .tok-nx { color: #a6e22e } /* Name.Other */
pre.pygments .tok-py { color: #f8f8f2 } /* Name.Property */
pre.pygments .tok-nt { color: #f92672 } /* Name.Tag */
pre.pygments .tok-nv { color: #f8f8f2 } /* Name.Variable */
pre.pygments .tok-ow { color: #f92672 } /* Operator.Word */
pre.pygments .tok-w { color: #f8f8f2 } /* Text.Whitespace */
pre.pygments .tok-mb { color: #ae81ff } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #ae81ff } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #ae81ff } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #ae81ff } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #ae81ff } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #e6db74 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #e6db74 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #e6db74 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #e6db74 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #e6db74 } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #e6db74 } /* Literal.String.Double */
pre.pygments .tok-se { color: #ae81ff } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #e6db74 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #e6db74 } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #e6db74 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #e6db74 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #e6db74 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #e6db74 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #a6e22e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #f8f8f2 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #f8f8f2 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #f8f8f2 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #f8f8f2 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #ae81ff } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 bd-sidebar sticky-top border-columns border-right p-0"><div class="mx-auto text-center LogoAndToggle"><a href="https://docs.killbill.io/"><img class="logo rounded mx-auto d-block img-fluid" src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" /></a><button class="btn btn-link bd-search-docs-toggle d-md-none p-0 ml-3 toggle-nav-btn" type="button" data-toggle="collapse" data-target="#toc" aria-controls="toc" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div><form role="search" class="bd-search d-flex align-items-center"><input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off" data-docs-version="4.4"></form><nav id="toc" class="collapse bd-links toc"><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Getting started</a><ul class="nav navbar-nav"><li><a class="nav-link" href="https://docs.killbill.io/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/getting_started.html">Quick start</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Installation</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/aws.html">AWS Development</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_deployment.html">Going to production</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/database_migrations.html">Database migrations</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;notes</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link ml-2">Manuals</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_payment.html">Payment processing</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/email-notification-plugin.html">Email Notification plugin</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_analytics.html">Analytics plugin</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/userguide_configuration.html">Kill Bill&nbsp;configuration</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/internationalization.html">Kill Bill&nbsp;internationalization</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Tutorials</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://docs.killbill.io/latest/plan_alignment.html">Plans alignments</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/overdue.html">Overdue system</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="https://docs.killbill.io/latest/ha.html">Hierarchical Accounts</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Integration</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API reference</a></li><li><a href="https://docs.killbill.io/latest/swagger_documentation.html">Swagger UI Documentation           </a></li><li><a href="https://docs.killbill.io/latest/postman.html">Postman Integration</a></li><li><a href="https://docs.killbill.io/latest/debugging.html">Debugging</a></li><li><a href="https://docs.killbill.io/latest/push_notifications.html">Push notifications</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Plugin development</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/plugin_development.html">Plugin Development</a></li><li><a href="https://docs.killbill.io/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a href="https://docs.killbill.io/latest/notification_plugin.html">Notification Plugins</a></li><li><a href="https://docs.killbill.io/latest/payment_plugin.html">Payment Plugins</a></li><li><a href="https://docs.killbill.io/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a href="https://docs.killbill.io/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a href="https://docs.killbill.io/latest/catalog_plugin.html">Catalog Plugins</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Operational guides</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/user_management.html">Users, Roles and Permissions</a></li><li><a href="https://docs.killbill.io/latest/plugin_management.html">Plugin Management</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Client libraries</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/java_client.html">Java</a></li><li><a href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">Go</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">About Kill Bill</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/demo.html"> Demo</a></li><li><a href="https://docs.killbill.io/latest/features.html">Features list</a></li><li><a href="https://docs.killbill.io/latest/faq.html"> FAQ</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">Internal</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://docs.killbill.io/latest/internal_design.html">Internal design</a></li><li><a href="https://docs.killbill.io/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a href="https://docs.killbill.io/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a href="https://docs.killbill.io/latest/development.html">Development</a></li></ul></li></ul><ul class="nav navbar-nav"><li><a class="bd-toc-link main-link">References</a><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API schema</a></li><li><a href="https://docs.killbill.io/latest/catalog.xsd">Catalog XSD reference</a></li><li><a href="https://docs.killbill.io/latest/overdue.xsd">Overdue XSD reference</a></li></ul></li></ul></nav></div><div class="col-12 col-md-9 col-xl-8 border-right"><div id="header"><h1>Email Notification Plugin</h1></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>As the name implies, the <a href="https://github.com/killbill/killbill-email-notifications-plugin">email notification plugin</a> is a plugin that sends out emails when certain events occur. This document covers how to install, test, and use this plugin.</p></div></div></div>
<div class="sect1"><h2 id="_prerequisites">Prerequisites</h2><div class="sectionbody"><div class="paragraph"><p>Ensure that you have Kill Bill, Kaui, and the database set up as explained in the <a href="https://docs.killbill.io/latest/getting_started.html">Getting Started Guide</a>.</p></div></div></div>
<div class="sect1"><h2 id="_overview">Overview</h2><div class="sectionbody"><div class="paragraph"><p>The <a href="https://github.com/killbill/killbill-email-notifications-plugin">email notification plugin</a> is a <a href="https://docs.killbill.io/latest/notification_plugin.html">notification plugin</a>. It listens to <a href="https://docs.killbill.io/latest/notification_plugin.html#_kill_bill_events_handled_by_notification_plugin">events</a> and sends emails accordingly.</p></div>
<div class="paragraph"><p>Currently, the email notification plugin supports the following events:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Event Type</th><th class="tableblock halign-left valign-top">Email Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">INVOICE_CREATION</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The customer will receive an email informing them that a new invoice is available.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">INVOICE_NOTIFICATION</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The customer will receive an email about upcoming invoices (the time at which to send the email is configured through the Kill Bill system property <code>org.killbill.invoice.dryRunNotificationSchedule</code>).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">INVOICE_PAYMENT_SUCCESS</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The customer will receive an email after each successful payment or refund.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">INVOICE_PAYMENT_FAILED</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The customer will receive an email after each failed payment.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">SUBSCRIPTION_CANCEL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The customer will receive an email at the time a subscription was requested to be canceled and/or at the effective date of the subscription cancellation.</p></td></tr></tbody></table>
<div class="paragraph"><p>In addition, it can be extended to to handle other types of events as well. This is explained in the <a href="#_configuring_the_plugin_for_additional_events">[_configuring_the_plugin_for_additional_events]</a> section below.</p></div>
<div class="paragraph"><p>To send an email the following is required:</p></div>
<div class="ulist"><ul><li><p>The tenant or account must be configured to permit such event(s). This is explained in the <a href="#_plugin_configuration">[_plugin_configuration]</a> section below.</p></li><li><p>The account for which the emails need to be sent must have certain fields set. This is explained in the <a href="#_account_configuration">[_account_configuration]</a> section below.</p></li></ul></div></div></div>
<div class="sect1"><h2 id="_plugin_installation">Plugin Installation</h2><div class="sectionbody"><div class="paragraph"><p>A plugin can be installed via the <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm">Kill Bill Package Manager (KPM)</a>. For this, please follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Ensure that you have kpm installed as explained <a href="https://github.com/killbill/killbill-cloud/tree/master/kpm#kpm-installation">here</a>.</p></li><li><p>Install the plugin using the following kpm command (Replace <code>&lt;path_to_install_plugin&gt;</code> with the path where you want to install the plugin. This path should match the path specified by the <code>org.killbill.osgi.bundle.install.dir</code> property in the Kill Bill configuration file):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>kpm install_java_plugin email-notifications --destination<span class="tok-o">=</span>&lt;path_to_install_plugin&gt;</code></pre></div></div></li><li><p>Verify that the plugin is installed properly. This can be done by ensuring that the plugin JAR is present at the <code>path_to_install_plugin</code> specified in the previous step. Alternatively, you can also open <code>kpm</code> in <a href="https://docs.killbill.io/latest/userguide_kaui.html">Kaui</a> and verify that the email notification plugin is running as follows:
<span class="image"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/email-notification-plugin/kaui_email_notification_plugin.png" alt="kaui email notification plugin"></span></p></li><li><p>If you would like to make changes to the plugin, you can clone the plugin code, build and deploy it as explained <a href="https://github.com/killbill/killbill-email-notifications-plugin">here</a>.</p></li></ol></div></div></div>
<div class="sect1"><h2 id="_database_configuration">Database Configuration</h2><div class="sectionbody"><div class="paragraph"><p>The email-notification-plugin requires some additional database tables. To create these tables, please follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Connect to the Kill Bill database.</p></li><li><p>Run the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/master/src/main/resources/ddl.sql">email-notification-plugin</a> DDL.</p></li></ol></div></div></div>
<div class="sect1"><h2 id="_plugin_configuration">Plugin Configuration</h2><div class="sectionbody"><div class="paragraph"><p>In order to use the email notification plugin, a tenant needs to be configured with the SMTP properties required for sending emails. Additionally, the tenant can also be configured with the events for which emails should be sent. In addition to the per-tenant configuration, the plugin also allows a more granular account-level configuration for the set of emails to be sent for the particular account. Thus, either the tenant or the account needs to be configured with the events for which the email needs to be sent.</p></div>
<div class="paragraph"><p>The tenant/account configuration can be done by executing the required API endpoints via <strong>cURL</strong> as explained below:</p></div>
<div class="olist arabic" id="tenant-config"><ol class="arabic"><li><p><strong>Configure the tenant</strong> using the following cURL command (Replace <code>&lt;events&gt;</code> with a comma-separated list of the events for which the emails need to be sent. For example, to configure the tenant to send emails for <strong>INVOICE_CREATION</strong> and <strong>INVOICE_PAYMENT_SUCCESS</strong>, specify <code>org.killbill.billing.plugin.email-notifications.defaultEvents=INVOICE_CREATION,INVOICE_PAYMENT_SUCCESS</code>):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
     -X POST <span class="tok-se">\</span>
     -u admin:password <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-ApiKey: bob&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-ApiSecret: lazar&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;Content-Type: text/plain&#39;</span> <span class="tok-se">\</span>
     -d <span class="tok-s1">&#39;org.killbill.billing.plugin.email-notifications.defaultEvents=&lt;events&gt;</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.host=127.0.0.1</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.port=25</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.useAuthentication=true</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.userName=uuuuuu</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.password=zzzzzz</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.useSSL=false</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.sendHTMLEmail=true</span>
<span class="tok-s1">org.killbill.billing.plugin.email-notifications.smtp.defaultSender=xxx@yyy.com&#39;</span> <span class="tok-se">\</span>
http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/killbill-email-notifications</code></pre></div></div></li><li><p>If you are on Windows, we recommend that you use <a href="https://git-scm.com/download/win">Git Bash</a> to run the above command. Since the above is a multiline cURL command, it may not run properly in the standard windows command prompt. Alternatively, you may also use <a href="https://www.postman.com/">Postman</a> to execute the tenant configuration endpoint as explained <a href="https://docs.killbill.io/latest/postman.html">here</a>.</p></li><li><p><strong>Configure the account</strong> using the following cURL command (Replace <code>{accountId}</code> with the id of the account for which emails need to be sent and <code>&lt;events&gt;</code> with a comma-separated list of the events for which the emails need to be sent. For example, to configure the account to send emails for <strong>INVOICE_CREATION</strong> and <strong>INVOICE_PAYMENT_SUCCESS</strong>, specify <code>"INVOICE_CREATION", "INVOICE_PAYMENT_SUCCESS"</code>):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
     -X POST <span class="tok-se">\</span>
     -u admin:password <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-ApiKey: bob&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-ApiSecret: lazar&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span> <span class="tok-se">\</span>
     -H <span class="tok-s1">&#39;Content-Type: application/json&#39;</span> <span class="tok-se">\</span>
     -d <span class="tok-s1">&#39;[&lt;events&gt;]&#39;</span> <span class="tok-se">\</span>
    http://127.0.0.1:8080/plugins/killbill-email-notifications/v1/accounts/<span class="tok-o">{</span>accountId<span class="tok-o">}</span></code></pre></div></div></li><li><p>Note that either the <strong>tenant</strong> or the <strong>account</strong> should be configured with the events for which emails need to be sent, otherwise, emails will not be sent. Some scenarios for this:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>If a tenant is configured with some events, but the account is not configured, then emails will be sent based on what is configured at the tenant level.</p></li><li><p>If a tenant is not configured with any events but the account is configured with events, then emails will be sent based on what is configured at the account level.</p></li><li><p>If both tenant and account are configured with separate events, emails will be sent based on the events configured for both.</p></li></ol></div></li></ol></div></div></div>
<div class="sect1"><h2 id="_account_configuration">Account Configuration</h2><div class="sectionbody"><div class="paragraph"><p>The account for which emails need to be sent, needs to have the <code>email</code> and <code>locale</code> fields set. In addition, the <a href="#email-templates">[email-templates]</a> used by the notification plugin also require the  <code>company</code>, <code>address1</code>, <code>city</code>, <code>state</code>, <code>postalCode</code>, <code>country</code> fields also set on the Account.</p></div>
<div class="paragraph"><p>Thus, ensure that the account is created using the following cURL command (Replace <code>&lt;email_id&gt;</code> with the email id where you would like to receive the email and change values for the other fields as required):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X POST <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    -d <span class="tok-s1">&#39;{ &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;&lt;email_id&gt;&quot;, &quot;currency&quot;: &quot;USD&quot;, &quot;company&quot;: &quot;Acme Corporation&quot;, &quot;locale&quot;:&quot;en_US&quot;, &quot;address1&quot;: &quot;57 Academy Drive&quot;,&quot;city&quot;: &quot;Oak Creek&quot;,&quot;state&quot;: &quot;WI&quot;,&quot;postalCode&quot;: &quot;53154&quot;, &quot;country&quot;: &quot;US&quot;}&#39;</span> <span class="tok-se">\</span>
<span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/accounts&quot;</span></code></pre></div></div></div></div>
<div class="sect1"><h2 id="_smtp_server_notes">SMTP Server Notes</h2><div class="sectionbody"><div class="paragraph"><p>In order to be able to use the email notification plugin to send emails, a local SMTP server is required.</p></div>
<div class="paragraph"><p>We typically use the <code>namshi/smtp</code> docker image as follows to start a local SMTP server on port 25:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>docker run -tid --name smtp_server -p <span class="tok-m">25</span>:25  -e <span class="tok-nv">DISABLE_IPV6</span><span class="tok-o">=</span><span class="tok-nb">true</span> namshi/smtp</code></pre></div></div>
<div class="paragraph"><p>Alternatively, if you would like to use a non-docker based SMTP server, you can use <a href="https://www.mailslurper.com/">MailSlurper</a>. MailSlurper is a small handy SMTP server that can be useful for development and testing. It can be downloaded and configured as explained <a href="https://github.com/mailslurper/mailslurper/wiki/Getting-Started">here</a>.</p></div></div></div>
<div class="sect1"><h2 id="_testing_the_plugin">Testing the plugin</h2><div class="sectionbody"><div class="paragraph"><p>Once the plugin is installed and configured as explained above, it can be used for sending emails. You can verify that the plugin is working correctly by following the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Start a local SMTP server as explained in the <a href="#_smtp_server_notes">[_smtp_server_notes]</a> section above.</p></li><li><p>Ensure that Kill Bill is running either in <a href="https://docs.killbill.io/latest/development.html#_running_the_application">standalone</a> mode or in <a href="https://docs.killbill.io/latest/getting_started.html">Tomcat</a>.</p></li><li><p>Create a tenant as follows (specify the required <code>apiKey</code> and <code>apiSecret</code>):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X POST <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    -d <span class="tok-s1">&#39;{ &quot;apiKey&quot;: &quot;bob&quot;, &quot;apiSecret&quot;: &quot;lazar&quot;}&#39;</span> <span class="tok-se">\</span>
    <span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/tenants&quot;</span></code></pre></div></div></li><li><p>Configure the tenant as specified in the <a href="#tenant-config">[tenant-config]</a> section above with <strong>INVOICE_CREATION</strong> and <strong>INVOICE_PAYMENT_SUCCESS</strong> events.</p></li><li><p>Create an account as follows (Replace <code>&lt;email_id&gt;</code> with the email id where you would like to receive the email and change values for the other fields as required):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X POST <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    -d <span class="tok-s1">&#39;{ &quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;&lt;email_id&gt;&quot;, &quot;currency&quot;: &quot;USD&quot;, &quot;company&quot;: &quot;Acme Corporation&quot;, &quot;locale&quot;:&quot;en_US&quot;, &quot;address1&quot;: &quot;57 Academy Drive&quot;,&quot;city&quot;: &quot;Oak Creek&quot;,&quot;state&quot;: &quot;WI&quot;,&quot;postalCode&quot;: &quot;53154&quot;, &quot;country&quot;: &quot;US&quot;}&#39;</span> <span class="tok-se">\</span>
<span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/accounts&quot;</span></code></pre></div></div></li><li><p>If successful, the command above returns a <code>Location</code> header like http://127.0.0.1:8080/1.0/kb/accounts/eda3e357-20a1-456d-a9b3-b39ca3db8020. Copy the <code>account_id</code> in the header (<code>eda3e357-20a1-456d-a9b3-b39ca3db8020</code> in this case) and save it for future use.</p></li><li><p>Add a payment method as follows (replace <code>&lt;account_id&gt;</code> with the account id obtained above):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X POST <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    -d <span class="tok-s1">&#39;{ &quot;accountId&quot;: &quot;&lt;account_id&gt;&quot;, &quot;pluginName&quot;: &quot;__EXTERNAL_PAYMENT__&quot;}&#39;</span> <span class="tok-se">\</span>
    <span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/accounts/&lt;account_id&gt;/paymentMethods&quot;</span></code></pre></div></div></li><li><p>If successful, the command above returns a <code>Location</code> header like
http://127.0.0.1:8080/1.0/kb/paymentMethods/c2ff0040-7c5b-48bf-9685-a4c57501535f. Copy the <code>payment_method_id</code> in the header (<code>c2ff0040-7c5b-48bf-9685-a4c57501535f</code> in this case) and save it for future use.</p></li><li><p>Set the payment method as default as follows (replace <code>&lt;account_id&gt;</code> and <code>&lt;payment_method_id&gt;</code> with the values obtained above):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X PUT <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    <span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/accounts/&lt;account_id&gt;/paymentMethods/&lt;payment_method_id&gt;/setDefault&quot;</span></code></pre></div></div></li><li><p>Create a external charge to trigger an invoice as follows(replace <code>&lt;account_id&gt;</code> with the account_id obtained above):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
    -X POST <span class="tok-se">\</span>
    -u admin:password <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Content-Type: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;Accept: application/json&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-CreatedBy: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Reason: demo&quot;</span> <span class="tok-se">\</span>
    -H <span class="tok-s2">&quot;X-Killbill-Comment: demo&quot;</span> <span class="tok-se">\</span>
    -d <span class="tok-s1">&#39;[ { &quot;accountId&quot;: &quot;&lt;account_id&gt;&quot;, &quot;description&quot;: &quot;My charge&quot;, &quot;amount&quot;: 50, &quot;currency&quot;: &quot;USD&quot; }]&#39;</span>    <span class="tok-se">\</span>
    <span class="tok-s2">&quot;http://127.0.0.1:8080/1.0/kb/invoices/charges/&lt;account_id&gt;?autoCommit=true&quot;</span></code></pre></div></div></li><li><p>Confirm that an email is sent for the invoice and successful payment.</p></li></ol></div>
<div class="paragraph"><p>Note that you can also use <a href="https://docs.killbill.io/latest/userguide_kaui.html">Kaui</a> for executing steps 2-9 above.</p></div></div></div>
<div class="sect1"><h2 id="_template_and_resource_configuration">Template and resource configuration</h2><div class="sectionbody"><div class="paragraph"><p>The email notification plugin uses <a href="https://mustache.github.io/">Mustache</a> templates for generating emails. This section explains how custom email templates can be configured.</p></div>
<div class="sect2"><h3 id="email-templates">Templates Overview</h3><div class="paragraph"><p>An email template contains the body of an email. In addition to static text, it contains some variables which are replaced at runtime by the <a href="https://mustache.github.io/">mustache</a> engine.</p></div>
<div class="paragraph"><p>The email notification plugin comes with some <a href="https://github.com/killbill/killbill-email-notifications-plugin/tree/master/src/main/resources/org/killbill/billing/plugin/notification/templates">default templates</a>. However, users can also upload their custom templates.</p></div>
<div class="paragraph"><p>The email notification plugin uses <strong>one template per locale and per type</strong> (as opposed to one template per type with an additional set of translation string bundles for each locale). So, for example, the <strong>INVOICE_CREATION</strong> event can have templates like <code>INVOICE_CREATION_en_US</code>, <code>INVOICE_CREATION_fr_FR</code>, and so on. When an <strong>INVOICE CREATION</strong> email needs to be sent for a user, the user&#8217;s <code>locale</code> is checked and the corresponding template is used. The <a href="https://github.com/killbill/killbill-email-notifications-plugin/tree/master/src/main/resources/org/killbill/billing/plugin/notification/templates">default templates</a> are available only for the <strong>en_US</strong> locale, however, users can upload templates for other locales if required.</p></div></div>
<div class="sect2"><h3 id="_resources_overview">Resources overview</h3><div class="paragraph"><p>In addition to templates, the email notification plugin requires a resource file. This resource file contains <strong>key-value pairs</strong> which can be used to replace variables in a template. The email notification plugin comes with a <a href="https://github.com/killbill/killbill-email-notifications-plugin/tree/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations">default resource file</a> that contains key-value pairs for the variables in the default templates.</p></div>
<div class="paragraph"><p>Unlike email templates, all the events have a single resource file. However, different locales can have different resource files. This allows having string translations in different languages, (like different translations for the catalog product names). So for example, you can have different resource files like <code>Translation_en_US.properties</code>, <code>Translation_fr_FR.properties</code>, and so on. When an email needs to be sent for a user, the user&#8217;s <code>locale</code> is checked and the corresponding resource file is used to replace the variables in the template.</p></div>
<div class="paragraph"><p>The <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations/Translation_en_US.properties">default resource file</a> is available only for the <strong>en_US</strong> locale. Users can add additional key-value pairs to this resource file as well as add new resource files for different locales.</p></div></div>
<div class="sect2"><h3 id="_templatetranslation_resource_keys">Template/Translation Resource Keys</h3><div class="paragraph"><p>Each email template and the translation resource is assigned a <strong>key</strong>. To upload a custom email template/translation resource, its key needs to be specified.</p></div>
<div class="paragraph"><p>The following table provides details about the template/translation resource keys (assuming that the locale is <code>en_US</code>):</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Template Type</th><th class="tableblock halign-left valign-top">Template Key</th><th class="tableblock halign-left valign-top">Template Description</th><th class="tableblock halign-left valign-top">Default Template</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice creation</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:INVOICE_CREATION_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when an invoice is created</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/InvoiceCreation.mustache">InvoiceCreation.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Upcoming invoices</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:UPCOMING_INVOICE_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when an invoice is due</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/UpcomingInvoice.mustache">UpcomingInvoice.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Successful payments</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:SUCCESSFUL_PAYMENT_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when a payment is successful</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/SuccessfulPayment.mustache">SuccessfulPayment.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Failed payments</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:FAILED_PAYMENT_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when a payment fails</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/FailedPayment.mustache">FailedPayment.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Subscription cancellation (requested date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:SUBSCRIPTION_CANCELLATION_REQUESTED_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when a user requests to cancel a subscription</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/SubscriptionCancellationRequested.mustache">SubscriptionCancellationRequested.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Subscription cancellation (effective date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:SUBSCRIPTION_CANCELLATION_EFFECTIVE_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when a subscription is actually cancelled</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/SubscriptionCancellationEffective.mustache">SubscriptionCancellationEffective.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Payment refunds</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:PAYMENT_REFUND_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Template for the email that will be sent when a payment is refunded</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/templates/PaymentRefund.mustache">PaymentRefund.mustache</a></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Translation strings</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">killbill-email-notifications:TEMPLATE_TRANSLATION_en_US</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Includes all the text values referenced in the templates. Also includes the email subjects using the following keys:
<strong>upcomingInvoiceSubject
successfulPaymentSubject
failedPaymentSubject
paymentRefundSubject
subscriptionCancellationRequestedSubject
subscriptionCancellationEffectiveSubject
invoiceCreationSubject</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations/Translation_en_US.properties">Translation_en_US.properties</a></p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_uploading_a_custom_template">Uploading a custom template</h3><div class="paragraph"><p>As explained earlier, you can upload per-tenant email templates for various events. Let&#8217;s look at an example to upload a template for the next upcoming invoice for a locale <code>en_US</code>:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Create the template <code>/tmp/UpcomingInvoice.mustache</code>:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>*** You Have a New Invoice ***

You have a new invoice from <span class="tok-o">{{</span>text.merchantName<span class="tok-o">}}</span>, due on <span class="tok-o">{{</span>invoice.targetDate<span class="tok-o">}}</span>.

<span class="tok-o">{{</span><span class="tok-c1">#invoice.invoiceItems}}</span>
<span class="tok-o">{{</span>startDate<span class="tok-o">}}</span> <span class="tok-o">{{</span>planName<span class="tok-o">}}</span> : <span class="tok-o">{{</span>invoice.formattedAmount<span class="tok-o">}}</span>
<span class="tok-o">{{</span>/invoice.invoiceItems<span class="tok-o">}}</span>

<span class="tok-o">{{</span>text.invoiceAmountTotal<span class="tok-o">}}</span>: <span class="tok-o">{{</span>invoice.formattedBalance<span class="tok-o">}}</span>

<span class="tok-o">{{</span>text.billedTo<span class="tok-o">}}</span>:
<span class="tok-o">{{</span>account.companyName<span class="tok-o">}}</span>
<span class="tok-o">{{</span>account.name<span class="tok-o">}}</span>
<span class="tok-o">{{</span>account.address1<span class="tok-o">}}</span>
<span class="tok-o">{{</span>account.city<span class="tok-o">}}</span>, <span class="tok-o">{{</span>account.stateOrProvince<span class="tok-o">}}</span> <span class="tok-o">{{</span>account.postalCode<span class="tok-o">}}</span>
<span class="tok-o">{{</span>account.country<span class="tok-o">}}</span>

If you have any questions about your account, please reply to this email or contact <span class="tok-o">{{</span>text.merchantName<span class="tok-o">}}</span> Support at: <span class="tok-o">{{</span>text.merchantContactPhone<span class="tok-o">}}</span></code></pre></div></div></li><li><p>Upload the template for your tenant:</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
-u admin:password <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
-H <span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span> <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;Content-Type: text/plain&quot;</span> <span class="tok-se">\</span>
-X POST <span class="tok-se">\</span>
--data-binary @/tmp/UpcomingInvoice.mustache <span class="tok-se">\</span>
http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/killbill-email-notifications:UPCOMING_INVOICE_en_US</code></pre></div></div></li><li><p>If your template uses some additional keys than what are specified in the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations/Translation_en_US.properties">default translation file</a>, these need to be added to the translation file as explained in the next section.</p></li></ol></div></div>
<div class="sect2"><h3 id="_uploading_resource_files">Uploading Resource files</h3><div class="paragraph"><p>As explained earlier, you can upload additional resource files for different locales or additional keys in existing resource files. In order to do this, please follow the steps given below:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Check if a resource file <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations/">already exists</a> for your locale. If so, download the file and if not, create a new file. You can use the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/resources/org/killbill/billing/plugin/notification/translations/Translation_en_US.properties">default translation template</a> as a reference to create a new file.</p></li><li><p>Add the required properties (key-value pairs) to your file.</p></li><li><p>Upload the new resource file using the following cURL command (Replace <code>&lt;template-name&gt;</code> with the name of the file created in the previous step and <code>&lt;translation_key&gt;</code> with the translation key. For example the translation key for a resource file for the <code>en_US</code> locale will be <strong>TEMPLATE_TRANSLATION_en_US</strong>):</p><div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>curl -v <span class="tok-se">\</span>
-u admin:password <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;X-Killbill-ApiKey: bob&quot;</span> <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;X-Killbill-ApiSecret: lazar&quot;</span> <span class="tok-se">\</span>
-H <span class="tok-s1">&#39;X-Killbill-CreatedBy: admin&#39;</span> <span class="tok-se">\</span>
-H <span class="tok-s2">&quot;Content-Type: text/plain&quot;</span> <span class="tok-se">\</span>
-X POST <span class="tok-se">\</span>
--data-binary @/&lt;template-name&gt;.properties <span class="tok-se">\</span>
http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/killbill-email-notifications:&lt;translation_key&gt;</code></pre></div></div></li></ol></div></div></div></div>
<div class="sect1"><h2 id="_configuring_the_plugin_for_additional_events">Configuring the plugin for additional events</h2><div class="sectionbody"><div class="paragraph"><p>As explained earlier, the email notification plugin is a <a href="https://docs.killbill.io/latest/notification_plugin.html">notification plugin</a>. In addition to the events handled by it by default, it can be configured to listen to other events and send emails accordingly.</p></div>
<div class="paragraph"><p>In order to configure the plugin to send emails for other events, you will need to modify the plugin code as follows:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Ensure that the event for which you would like to send an email is defined in the <a href="https://github.com/killbill/killbill-plugin-api/blob/d9eca5af0e37541069b1c608f95e100dbe13b301/notification/src/main/java/org/killbill/billing/notification/plugin/api/ExtBusEventType.java">ExtBusEventType.java</a>.</p></li><li><p>Modify the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/java/org/killbill/billing/plugin/notification/setup/EmailNotificationListener.java">EmailNotificationListener</a> class as follows:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Modify the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/java/org/killbill/billing/plugin/notification/setup/EmailNotificationListener.java#L113">EmailNotificationListener#handleKillbillEvent</a> method to add case statements corresponding to the events that need to be handled.</p></li><li><p>Add a method corresponding to the email that you would like to send similar to the <a href="https://github.com/killbill/killbill-email-notifications-plugin/blob/6fc76403233fd5be290841ee6fc9d728028892f0/src/main/java/org/killbill/billing/plugin/notification/setup/EmailNotificationListener.java#L213">EmailNotificationListener#sendEmailForUpComingInvoice</a> method.</p></li></ol></div></li><li><p>Upload email templates and translation resource file corresponding to the email that you would like to send as explained in the <a href="#_template_and_resource_configuration">[_template_and_resource_configuration]</a> section.</p></li></ol></div></div></div>
<div class="sect1"><h2 id="_customizing_the_invoice_sent_in_an_email">Customizing the invoice sent in an email</h2><div class="sectionbody"><div class="paragraph"><p>Sometimes, you may need to customize the invoice sent in an email with additional fields. For this, you will need to create a custom plugin. The detailed instructions for this are mentioned in our <a href="https://docs.killbill.io/latest/custom-email-invoice-formatter.html">Custom Email Invoice Formatter</a> document.</p></div></div></div>
<div class="sect1"><h2 id="_troubleshooting">Troubleshooting</h2><div class="sectionbody"><div class="paragraph"><p>This section covers some common issues and their solutions.</p></div>
<div class="sect2"><h3 id="_emails_not_sent">Emails not sent</h3><div class="paragraph"><p>Sometimes, even after configuring the plugin as mentioned above, you may find that emails are not sent. There are several reasons for this:</p></div>
<div class="paragraph"><p><strong>Missing information on Account</strong></p></div>
<div class="paragraph"><p>In order to send an email, the <code>Account</code> record needs to have
the <code>locale</code> and <code>email</code> fields set. In addition, if you are using the default templates provided by the plugin, the <code>company</code>, <code>address1</code>, <code>city</code>, <code>state</code>, <code>postalCode</code>, <code>country</code> fields also need to be set on the Account. If any of these fields are missing, emails will not be sent and you will see the following exception in the Kill Bill logs:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>com.samskivert.mustache.MustacheException: No key, method or field with name <span class="tok-s1">&#39;account.companyName&#39;</span></code></pre></div></div>
<div class="paragraph"><p>Ensure that the account for which the emails are to be sent is configured with all the required fields as explained in the <a href="#_account_configuration">[_account_configuration]</a> section above.</p></div>
<div class="paragraph"><p><strong>Missing information in template</strong></p></div>
<div class="paragraph"><p>Sometimes, you may upload a custom template. However, you may forget to upload the translation keys for it in the resource file. In such a case, the email will not be sent and you will see the following exception in the Kill Bill logs:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span></span>com.samskivert.mustache.MustacheException: No key, method or field with name <span class="tok-s1">&#39;text.merchantName&#39;</span></code></pre></div></div>
<div class="paragraph"><p>Ensure that you also update the translation properties as specified in the <a href="#_uploading_resource_files">[_uploading_resource_files]</a> section above.</p></div></div>
<div class="sect2"><h3 id="_enabling_ssl_in_emails">Enabling SSL in emails</h3><div class="paragraph"><p>In order to enable SSL while sending emails, you need to configure the tenant with the <code>org.killbill.mail.useSSL=true</code> as specified in the <a href="#tenant-config">[tenant-config]</a> section above.</p></div></div></div></div></div></div><div class="col-12 col-md-3 col-xl-2 bd-sidebar sticky-top border-columns border-right p-0"><nav class="collapse bd-links toc right-side-menu" id="toc" data-toggle="toc"></nav></div></div></div><div class="container-fluid"><div class="row"><div class="col-12 border-columns"></div><div id="footer"><div id="footer-text">Last updated 2021-08-27 10:51:31 UTC</div><script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create','UA-32705710-3','auto');
          ga('send','pageview');
          var getOutboundLink = function(url) {
            ga('send', {
              hitType: 'event',
              eventCategory: 'outbound',
              eventAction: 'click',
              eventLabel: url,
              hitCallback: function(){document.location = url;}
            });
          }
          </script></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script><script src="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript">docsearch({apiKey: '9d2f6d24a05863f83c8844f6e7492c66',indexName: 'killbill',inputSelector: '#search-input', debug: false, algoliaOptions: {hitsPerPage: 10}});</script></body></html>